
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>PAController</title><meta name="generator" content="MATLAB 8.4"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2016-03-03"><meta name="DC.source" content="PAController.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h2>Contents</h2><div><ul><li><a href="#3">Shutdown functions</a></li><li><a href="#4">Startup configuration functions and callbacks</a></li><li><a href="#6">file</a></li><li><a href="#7">Tools</a></li><li><a href="#8">View Modes</a></li><li><a href="#9">Help</a></li><li><a href="#11">Settings menubar callbacks</a></li><li><a href="#12">context menu's for the view</a></li><li><a href="#13">reference line contextmenu</a></li></ul></div><pre class="codeinput"><span class="comment">%&gt; @file PAController.cpp</span>
<span class="comment">%&gt; @brief PAController serves as Padaco's controller component (i.e. in the model, view, controller paradigm).</span>
<span class="comment">% ======================================================================</span>
<span class="comment">%&gt; @brief PAController serves as the UI component of event marking in</span>
<span class="comment">%&gt; the Padaco.</span>
<span class="comment">%</span>
<span class="comment">%&gt; In the model, view, controller paradigm, this is the</span>
<span class="comment">%&gt; controller.</span>
<span class="keyword">classdef</span> PAController &lt; handle
    <span class="keyword">properties</span>(Constant)
        versionNum = 1.5;
    <span class="keyword">end</span>
    <span class="keyword">properties</span>(Access=private)
        <span class="comment">%&gt; @brief Vector for keeping track of the feature handles that are</span>
        <span class="comment">%&gt; displayed on the secondary axes field.</span>
        featureHandles;
        <span class="comment">%&gt; @brief The number of items to be displayed in the secondary</span>
        <span class="comment">%&gt; axes.</span>
        numViewsInSecondaryDisplay;
        <span class="comment">%&gt; @brief Identifies the acceleration type ('raw' or 'count' [default])</span>
        <span class="comment">%&gt; displayed in the primary and secondary axes.  This is controlled</span>
        <span class="comment">%&gt; by the users signal selection via GUI dropdown menu.  See</span>
        <span class="comment">%&gt; updateSecondaryFeaturesDisplayCallback</span>
        accelTypeShown;

    <span class="keyword">end</span>
    <span class="keyword">properties</span>
        <span class="comment">%&gt; acceleration activity object - instance of PAData</span>
        accelObj;
        <span class="comment">%&gt; Instance of PASettings - this is brought in to eliminate the need for several globals</span>
        SETTINGS;
        <span class="comment">%&gt; Instance of PAView - Padaco's view component.</span>
        VIEW;
        <span class="comment">%&gt; Instance of PAModel - Padaco's model component.  See accelObj.</span>
        MODEL;

        <span class="comment">%&gt; Instance of PAStatTool - results controller when in results view</span>
        <span class="comment">%&gt; mode.</span>
        StatTool;

        <span class="comment">%&gt; Linehandle in Padaco that is currently selected by the user.</span>
        current_linehandle;

        <span class="comment">%&gt; cell of string choices for the marking state (off, 'marking','general')</span>
        state_choices_cell;
        <span class="comment">%&gt; string of the current selected choice</span>
        <span class="comment">%&gt; handle to the figure an instance of this class is associated with</span>
        <span class="comment">%&gt; struct of handles for the context menus</span>
        contextmenuhandle;

        <span class="comment">%&gt; struct of different time resolutions, field names correspond to the units of time represented in the field</span>
        window_resolution;
        num_windows;
        display_samples; <span class="comment">%vector of the samples to be displayed</span>
        shift_display_samples_delta; <span class="comment">%number of samples to adjust display by for moving forward or back</span>
        startDateTime;

        <span class="comment">%&gt; Struct of batch settings with fields as described by</span>
        <span class="comment">%PABatchTool's getDefault</span>
        batch;

        <span class="comment">%&gt; String identifying Padaco's current view mode.  Values include</span>
        <span class="comment">%&gt; - @c timeseries</span>
        <span class="comment">%&gt; - @c results</span>
        viewMode;

        <span class="comment">%&gt; Foldername of most recent screenshot.</span>
        screenshotPathname;
        <span class="comment">%&gt; Foldername of most recent results output pathname used.</span>
        resultsPathname;

        <span class="comment">%&gt; struct to keep track of various Padaco states</span>
        STATE;
        Padaco_loading_file_flag; <span class="comment">%boolean set to true when initially loading a src file</span>
        Padaco_mainaxes_ylim;
        Padaco_mainaxes_xlim;
    <span class="keyword">end</span>


    <span class="keyword">methods</span>
</pre><pre class="codeinput">        <span class="keyword">function</span> obj = PAController(Padaco_fig_h,<span class="keyword">...</span>
                rootPathname,<span class="keyword">...</span>
                parameters_filename)
            <span class="keyword">if</span>(nargin&lt;1)
                Padaco_fig_h = [];
            <span class="keyword">end</span>
            <span class="keyword">if</span>(nargin&lt;2)
                rootPathname = fileparts(mfilename(<span class="string">'fullpath'</span>));
            <span class="keyword">end</span>

            <span class="comment">%check to see if a settings file exists</span>
            <span class="keyword">if</span>(nargin&lt;3)
                parameters_filename = <span class="string">'_padaco.parameters.txt'</span>;
            <span class="keyword">end</span>;

            obj.StatTool = [];

            <span class="comment">%create/intilize the settings object</span>
            obj.SETTINGS = PASettings(rootPathname,parameters_filename);
            obj.batch = obj.SETTINGS.CONTROLLER.batch;
            obj.screenshotPathname = obj.SETTINGS.CONTROLLER.screenshotPathname;
            obj.resultsPathname = obj.SETTINGS.CONTROLLER.resultsPathname;

            obj.accelTypeShown = [];

            <span class="keyword">if</span>(ishandle(Padaco_fig_h))
                obj.featureHandles = [];

                <span class="comment">% Create a VIEW class</span>
                <span class="comment">% 1. make context menu handles for the lines</span>
                <span class="comment">% 2. make context menu handles for the primary axes</span>
                uiLinecontextmenu_handle = obj.getLineContextmenuHandle();
                uiPrimaryAxescontextmenu_handle = obj.getPrimaryAxesContextmenuHandle();
                featureLineContextMenuHandle = obj.getFeatureLineContextmenuHandle();


                <span class="comment">% initialize the view here ...?</span>
                obj.VIEW = PAView(Padaco_fig_h,uiLinecontextmenu_handle,uiPrimaryAxescontextmenu_handle,featureLineContextMenuHandle);

                obj.VIEW.showBusy([],<span class="string">'all'</span>);

                obj.initWidgets();

                set(Padaco_fig_h,<span class="string">'CloseRequestFcn'</span>,{@obj.figureCloseCallback,guidata(Padaco_fig_h)});

                <span class="comment">%configure the menu bar callbacks.</span>
                obj.initMenubarCallbacks();

                lastViewMode = obj.SETTINGS.CONTROLLER.viewMode;

                <span class="comment">% attempt to load the last set of results</span>
                <span class="keyword">switch</span>(lower(lastViewMode))
                    <span class="keyword">case</span> <span class="string">'results'</span>
                        obj.menuViewmodeResultsCallback();
                    <span class="keyword">case</span> <span class="string">'timeseries'</span>
                        obj.menuViewmodeTimeSeriesCallback();
                    <span class="keyword">case</span> <span class="string">'batch'</span>
                        obj.menuViewmodeBatchCallback();
                    <span class="keyword">otherwise</span>
                        <span class="comment">% unhandled</span>
                <span class="keyword">end</span>

            <span class="keyword">end</span>
        <span class="keyword">end</span>
</pre><pre class="codeoutput">
ans = 

  PAController with properties:

                     versionNum: 1.5000
                       accelObj: []
                       SETTINGS: [1x1 PASettings]
                           VIEW: []
                          MODEL: []
                       StatTool: []
             current_linehandle: []
             state_choices_cell: []
              contextmenuhandle: []
              window_resolution: []
                    num_windows: []
                display_samples: []
    shift_display_samples_delta: []
                  startDateTime: []
                          batch: [1x1 struct]
                       viewMode: []
             screenshotPathname: '/users/unknown/git/padaco'
                resultsPathname: '/Users/unknown/Data/GOALS/output/output_...'
                          STATE: []
       Padaco_loading_file_flag: []
           Padaco_mainaxes_ylim: []
           Padaco_mainaxes_xlim: []

</pre><h2>Shutdown functions<a name="3"></a></h2><pre class="codeinput">        <span class="comment">%&gt; Destructor</span>
        <span class="keyword">function</span> close(obj)
            <span class="keyword">if</span>(~isempty(obj.accelObj))
                obj.SETTINGS.DATA = obj.accelObj.getSaveParameters();

            <span class="keyword">end</span>

            <span class="comment">% update the stat tool settings if it was used successfully.</span>
            <span class="keyword">if</span>(~isempty(obj.StatTool) &amp;&amp; obj.StatTool.getCanPlot())
                obj.SETTINGS.StatTool = obj.StatTool.getSaveParameters();
            <span class="keyword">end</span>

            obj.SETTINGS.CONTROLLER = obj.getSaveParameters();
            obj.saveParameters(); <span class="comment">%requires SETTINGS variable</span>
            obj.SETTINGS = [];
            <span class="keyword">if</span>(~isempty(obj.StatTool))
                obj.StatTool.delete();
            <span class="keyword">end</span>

        <span class="keyword">end</span>

        <span class="keyword">function</span> saveParameters(obj)
            obj.SETTINGS.saveParametersToFile();
        <span class="keyword">end</span>

<span class="comment">%         function paramStruct = getSaveParametersStruct(obj)</span>
<span class="comment">%             paramStruct = obj.SETTINGS.VIEW;</span>
<span class="comment">%         end</span>
</pre><h2>Startup configuration functions and callbacks<a name="4"></a></h2><p>--------------------------------------------------------------------</p><pre class="codeinput">        <span class="comment">%&gt; @brief Configure callbacks for the figure, menubar, and widets.</span>
        <span class="comment">%&gt; Called internally during class construction.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> initCallbacks(obj)
            figH = obj.VIEW.getFigHandle();

            <span class="comment">% mouse and keyboard callbacks</span>
            set(figH,<span class="string">'KeyPressFcn'</span>,@obj.keyPressCallback);
            set(figH,<span class="string">'KeyReleaseFcn'</span>,@obj.keyReleaseCallback);
            set(figH,<span class="string">'WindowButtonDownFcn'</span>,@obj.windowButtonDownCallback);
            set(figH,<span class="string">'WindowButtonUpFcn'</span>,@obj.windowButtonUpCallback);

<span class="comment">%         function setLinehandle(obj, line_h)</span>
<span class="comment">%             obj.clear_handles();</span>
<span class="comment">%             obj.current_linehandle = line_h;</span>
<span class="comment">%             set(obj.current_linehandle,'selected','on');</span>
<span class="comment">%         end</span>


            <span class="comment">%configure the user interface widgets</span>
            obj.initWidgetCallbacks();
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Executes when user attempts to close figure_padaco.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject    handle to menu_file_quit (see GCBO)</span>
        <span class="comment">%&gt; @param eventdata  reserved - to be defined in a future version of MATLAB</span>
        <span class="comment">%&gt; @param handles    structure with handles and user data (see GUIDATA)</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> figureCloseCallback(obj,hObject, eventdata, handles)
            <span class="keyword">try</span>
                obj.close();
                delete(hObject);
            <span class="keyword">catch</span> ME
                showME(ME);
                pause;
                killall;
            <span class="keyword">end</span>
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief  Executes on key press with focus on figure and no controls selected.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject    handle to figure (gcf)</span>
        <span class="comment">%&gt; @param eventdata Structure of key press information.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> keyPressCallback(obj,hObject, eventdata)
            <span class="comment">% key=double(get(hObject,'CurrentCharacter')); % compare the values to the list</span>
            key=eventdata.Key;
            <span class="comment">%             handles = guidata(hObject);</span>
            window = obj.getCurWindow();

            <span class="keyword">if</span>(strcmp(key,<span class="string">'add'</span>))

            <span class="keyword">elseif</span>(strcmp(key,<span class="string">'subtract'</span>))

            <span class="keyword">elseif</span>(strcmp(key,<span class="string">'leftarrow'</span>)||strcmp(key,<span class="string">'pagedown'</span>))
                <span class="comment">%go backward 1 window</span>
                obj.setCurWindow(window-1);
            <span class="keyword">elseif</span>(strcmp(key,<span class="string">'rightarrow'</span>)||strcmp(key,<span class="string">'pageup'</span>))
                <span class="comment">%go forward 1 window</span>
                obj.setCurWindow(window+1);
            <span class="keyword">elseif</span>(strcmp(key,<span class="string">'uparrow'</span>))
                <span class="comment">%go forward 10 windows</span>
                obj.setCurWindow(window+10);
            <span class="keyword">elseif</span>(strcmp(key,<span class="string">'downarrow'</span>))
                <span class="comment">%go back 10 windows</span>
                obj.setCurWindow(window-10);
            <span class="keyword">end</span>

            <span class="keyword">if</span>(strcmp(eventdata.Key,<span class="string">'shift'</span>))
                set(obj.VIEW.getFigHandle(),<span class="string">'pointer'</span>,<span class="string">'ibeam'</span>);
            <span class="keyword">end</span>
            <span class="keyword">if</span>(strcmp(eventdata.Modifier,<span class="string">'control'</span>))
                <span class="comment">%kill the program</span>
                <span class="keyword">if</span>(strcmp(eventdata.Key,<span class="string">'x'</span>))
                    delete(hObject);
                    <span class="comment">%take screen capture of figure</span>
                <span class="keyword">elseif</span>(strcmp(eventdata.Key,<span class="string">'f'</span>))
                    obj.figureScreenshot();
                    <span class="comment">%take screen capture of main axes</span>
                <span class="keyword">elseif</span>(strcmp(eventdata.Key,<span class="string">'s'</span>))
                    <span class="keyword">if</span>(isa(obj.VIEW,<span class="string">'PAView'</span>) &amp;&amp;ishandle(obj.VIEW.axeshandle.secondary))
                        obj.screenshotPathname = screencap(obj.VIEW.axeshandle.secondary,[],obj.screenshotPathname);
                    <span class="keyword">end</span>
                <span class="keyword">elseif</span>(strcmp(eventdata.Key,<span class="string">'p'</span>))
                    <span class="keyword">if</span>(isa(obj.VIEW,<span class="string">'PAView'</span>) &amp;&amp;ishandle(obj.VIEW.axeshandle.primary))
                        obj.screenshotPathname = screencap(obj.VIEW.axeshandle.primary,[],obj.screenshotPathname);
                    <span class="keyword">end</span>
                <span class="keyword">end</span>
            <span class="keyword">end</span>;
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief  Executes on key press with focus on figure and no controls selected.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject    handle to figure (gcf), unused</span>
        <span class="comment">%&gt; @param eventdata Structure of key press information.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> keyReleaseCallback(obj,hObject, eventdata)

            key=eventdata.Key;
            <span class="keyword">if</span>(strcmp(key,<span class="string">'shift'</span>))
                set(obj.VIEW.getFigHandle(),<span class="string">'pointer'</span>,<span class="string">'arrow'</span>);
            <span class="keyword">end</span>;
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief  Executes when user releases mouse click</span>
        <span class="comment">%&gt; If the currentObject selected is the secondary axes, then</span>
        <span class="comment">%&gt; the current window is set to the closest window corresponding to</span>
        <span class="comment">%&gt; the mouse's x-position.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject    handle to figure (gcf), unused</span>
        <span class="comment">%&gt; @param eventData Structure of mouse press information; unused</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> windowButtonUpCallback(obj,hObject,eventData)
            selected_obj = get(hObject,<span class="string">'CurrentObject'</span>);
            <span class="keyword">if</span>(~isempty(selected_obj))
                <span class="keyword">if</span>(selected_obj==obj.VIEW.axeshandle.secondary)
                    pos = get(selected_obj,<span class="string">'currentpoint'</span>);
                    clicked_datenum = pos(1);
                    cur_window = obj.accelObj.datenum2window(clicked_datenum,obj.VIEW.getDisplayType());
                    obj.setCurWindow(cur_window);
                <span class="keyword">end</span>;
            <span class="keyword">end</span>;
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief  Executes when user first clicks the mouse.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject    handle to figure (gcf), unused</span>
        <span class="comment">%&gt; @param eventData Structure of mouse press information; unused</span>
        <span class="comment">%&gt; @param Note - this turns off all other mouse movement and mouse</span>
        <span class="comment">%&gt; wheel callback methods.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> windowButtonDownCallback(obj,hObject,eventData)
            <span class="keyword">if</span>(ishandle(obj.current_linehandle))
                set(obj.VIEW.figurehandle,<span class="string">'windowbuttonmotionfcn'</span>,[]);

                obj.deactivateLineHandle();
            <span class="keyword">end</span>
        <span class="keyword">end</span>

        <span class="keyword">function</span> deactivateLineHandle(obj)
            set(obj.current_linehandle,<span class="string">'selected'</span>,<span class="string">'off'</span>);
            obj.current_linehandle = [];
            obj.VIEW.showReady();
            set(obj.VIEW.figurehandle,<span class="string">'windowbuttonmotionfcn'</span>,[],<span class="string">'WindowScrollWheelFcn'</span>,[]);
        <span class="keyword">end</span>

        <span class="comment">%-- Menubar configuration --</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Assign figure's menubar callbacks.</span>
        <span class="comment">%&gt; Called internally during class construction.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> initMenubarCallbacks(obj)
</pre><pre class="codeinput">            figH = obj.VIEW.getFigHandle();
            handles = guidata(figH);
</pre><h2>file<a name="6"></a></h2><p>settings and about</p><pre class="codeinput">            set(handles.menu_file_about,<span class="string">'callback'</span>,@obj.menuFileAboutCallback);
            set(handles.menu_file_settings,<span class="string">'callback'</span>,@obj.menuFileSettingsCallback);


            <span class="comment">%  open</span>
            set(handles.menu_file_open,<span class="string">'callback'</span>,@obj.menuFileOpenCallback);
            set(handles.menu_file_open_resultspath,<span class="string">'callback'</span>,@obj.menuFileOpenResultsPathCallback);

             <span class="comment">% screeshots</span>
            set(handles.menu_file_screenshot_figure,<span class="string">'callback'</span>,{@obj.menuFileScreenshotCallback,<span class="string">'figure'</span>});
            set(handles.menu_file_screenshot_primaryAxes,<span class="string">'callback'</span>,{@obj.menuFileScreenshotCallback,<span class="string">'primaryAxes'</span>});
            set(handles.menu_file_screenshot_secondaryAxes,<span class="string">'callback'</span>,{@obj.menuFileScreenshotCallback,<span class="string">'secondaryAxes'</span>});


             <span class="comment">%  quit - handled in main window.</span>
            set(handles.menu_file_quit,<span class="string">'callback'</span>,{@obj.menuFileQuitCallback,guidata(figH)});
</pre><h2>Tools<a name="7"></a></h2><p>export</p><pre class="codeinput">            set(handles.menu_file_export,<span class="string">'callback'</span>,@obj.menu_file_exportMenu_callback);
            set(handles.menu_file_export_dataObj,<span class="string">'callback'</span>,@obj.menu_file_export_dataObj_callback);
            set(handles.menu_file_export_centroidObj,<span class="string">'callback'</span>,@obj.menu_file_export_centroidObj_callback);
</pre><h2>View Modes<a name="8"></a></h2><pre class="codeinput">            set(handles.menu_viewmode_timeseries,<span class="string">'callback'</span>,@obj.menuViewmodeTimeSeriesCallback);
            set(handles.menu_viewmode_batch,<span class="string">'callback'</span>,@obj.menuViewmodeBatchCallback);
            set(handles.menu_viewmode_results,<span class="string">'callback'</span>,@obj.menuViewmodeResultsCallback);
</pre><h2>Help<a name="9"></a></h2><pre class="codeinput">            set(handles.menu_help_faq,<span class="string">'callback'</span>,@obj.menuHelpFAQCallback);

            <span class="comment">% enable everything</span>
            set([
                handles.menu_file
                handles.menu_file_about
                handles.menu_file_settings
                handles.menu_file_open
                handles.menu_file_quit
                handles.menu_viewmode
                handles.menu_help
                handles.menu_help_faq
                ],<span class="string">'enable'</span>,<span class="string">'on'</span>);
</pre><pre class="codeinput">        <span class="keyword">end</span>


        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Callback to display help FAQ from the menubar help-&gt;faq menu.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject</span>
        <span class="comment">%&gt; @param eventdata</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> menuHelpFAQCallback(obj,hObject,eventdata)
            msg = sprintf(<span class="string">'Help FAQ'</span>);
            web(url,<span class="string">'-notoolboar'</span>);
            msgbox(msg);
        <span class="keyword">end</span>


        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Assign figure's file-&gt;about menubar callback.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject</span>
        <span class="comment">%&gt; @param eventdata</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> menuFileAboutCallback(obj,hObject,eventdata)
            msg = sprintf([<span class="string">'Padaco version %0.2f\n'</span>,<span class="keyword">...</span>
                <span class="string">'\nSponsored by Stanford University\nin a collaborative effort between\nStanford Pediatric''s Solution Science Lab and\nCivil Engineering''s Sustainable Energy Lab.\n'</span>,<span class="keyword">...</span>
                <span class="string">'\nSoftware license: To be decided'</span>,<span class="keyword">...</span>
                <span class="string">'\nCopyright Hyatt Moore IV (2014-2016)\n'</span>
                ],obj.versionNum);
            msgbox(msg);
        <span class="keyword">end</span>


        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Assign figure's menubar callbacks.</span>
        <span class="comment">%&gt; Called internally during class construction.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject</span>
        <span class="comment">%&gt; @param eventdata</span>
        <span class="comment">%&gt; @param optionalSettingsName String specifying the settings to</span>
        <span class="comment">%&gt; update (optional)</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> menuFileSettingsCallback(obj,hObject,eventdata,optionalSettingsName)
            <span class="keyword">if</span>(nargin&lt;4)
                optionalSettingsName = [];
            <span class="keyword">end</span>
            wasModified = obj.SETTINGS.defaultsEditor(optionalSettingsName);
            <span class="keyword">if</span>(wasModified)
                <span class="comment">% save parameters to disk?</span>
                fprintf(<span class="string">'Settings have been updated.\n'</span>);
            <span class="keyword">end</span>
        <span class="keyword">end</span>


        <span class="keyword">function</span> initWidgets(obj)

            prefilterSelection = PAData.getPrefilterMethods();
            set(obj.VIEW.menuhandle.prefilterMethod,<span class="string">'string'</span>,prefilterSelection,<span class="string">'value'</span>,1);

            <span class="comment">% feature extractor</span>
            extractorMethodDescriptions = PAData.getExtractorDescriptions();
            extractorStruct = PAData.getFeatureDescriptionStruct();


            <span class="keyword">if</span>(isfield(extractorStruct,<span class="string">'usagestate'</span>))
                extractorStruct = rmfield(extractorStruct,<span class="string">'usagestate'</span>);
            <span class="keyword">end</span>

            extractorMethodFcns = fieldnames(extractorStruct);
            set(obj.VIEW.menuhandle.displayFeature,<span class="string">'string'</span>,extractorMethodDescriptions,<span class="string">'userdata'</span>,extractorMethodFcns,<span class="string">'value'</span>,1);

            <span class="comment">% set(obj.menuhandle.signalSelection,'string',extractorMethods,'value',1);</span>

            <span class="comment">% Window display resolution</span>
            windowMinSelection = {
                1,<span class="string">'1 s'</span>;
                2,<span class="string">'2 s'</span>;
                4,<span class="string">'4 s'</span>;
                5,<span class="string">'5 s'</span>;
                10,<span class="string">'10 s'</span>;
                <span class="comment">%30,'30 s';</span>
                <span class="comment">% 60,'1 min';</span>
                <span class="comment">%120,'2 min';</span>
                300,<span class="string">'5 min'</span>;
                600,<span class="string">'10 min'</span>;
                900,<span class="string">'15 min'</span>;
                1800,<span class="string">'30 min'</span>;
                3600,<span class="string">'1 hour'</span>;
                7200,<span class="string">'2 hours'</span>;
                14400,<span class="string">'4 hours'</span>;
                28800,<span class="string">'8 hours'</span>;
                43200,<span class="string">'12 hours'</span>;
                57600,<span class="string">'16 hours'</span>;
                86400,<span class="string">'1 day'</span>;
                86400*2,<span class="string">'2 days'</span>;
                86400*3,<span class="string">'3 days'</span>;
                86400*5,<span class="string">'5 days'</span>;
                86400*7,<span class="string">'1 week'</span>;
            };

            set(obj.VIEW.menuhandle.windowDurSec,<span class="string">'userdata'</span>,cell2mat(windowMinSelection(:,1)), <span class="string">'string'</span>,windowMinSelection(:,2),<span class="string">'value'</span>,5);

        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Assign callbacks to various user interface widgets.</span>
        <span class="comment">%&gt; Called internally during class construction.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> initWidgetCallbacks(obj)
            handles = guidata(obj.VIEW.getFigHandle());
            set(handles.edit_curWindow,<span class="string">'callback'</span>,@obj.edit_curWindowCallback);
            set(handles.edit_aggregate,<span class="string">'callback'</span>,@obj.edit_aggregateCallback);
            set(handles.edit_frameSizeMinutes,<span class="string">'callback'</span>,@obj.edit_frameSizeMinutesCallback);
            set(handles.edit_frameSizeHours,<span class="string">'callback'</span>,@obj.edit_frameSizeHoursCallback);

            <span class="comment">%initialize dropdown menu callbacks</span>
            set(obj.VIEW.menuhandle.displayFeature,<span class="string">'callback'</span>,@obj.updateSecondaryFeaturesDisplayCallback);
            set(handles.menu_windowDurSec,<span class="string">'callback'</span>,@obj.menu_windowDurSecCallback);

<span class="comment">%             set(obj.VIEW.menuhandle.prefilterMethod,'callback',[]);</span>
<span class="comment">%             set(obj.VIEW.menuhandle.signalSelection,'callback',[]);</span>
<span class="comment">%             set(obj.VIEW.menuhandle.signalSelection,'callback',@obj.updateSecondaryFeaturesDisplayCallback);</span>

            set(handles.panel_displayButtonGroup,<span class="string">'selectionChangeFcn'</span>,@obj.displayChangeCallback);

            set(handles.button_go,<span class="string">'callback'</span>,@obj.button_goCallback);

            <span class="comment">% Configure stats panel callbacks ...</span>
            <span class="comment">% - this is now handed in the PAStatTool.m class</span>
            <span class="comment">%             set([handles.check_sortvalues;</span>
            <span class="comment">%                 handles.check_normalizevalues;</span>
            <span class="comment">%                 handles.menu_feature;</span>
            <span class="comment">%                 handles.menu_signalsource;</span>
            <span class="comment">%                 handles.menu_plottype],'callback',@refreshResultsPlot);</span>


        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Callback for radio button change of the panel_displayButtonGroup handle.</span>
        <span class="comment">%&gt; The user can select either, 'time series', 'aggregate bins', or</span>
        <span class="comment">%&gt; 'features'.  If 'Features' is selected, then the Feature dropdown</span>
        <span class="comment">%&gt; menu is enabled, and is disabled otherwise.  The view is</span>
        <span class="comment">%&gt; redrawn.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject Handle to button group panel.</span>
        <span class="comment">%&gt; @param eventData Structure of event data to include:</span>
        <span class="comment">%&gt; @li @c EventName 'SelectionChanged'</span>
        <span class="comment">%&gt; @li @c OldValue Handle to the previous callback</span>
        <span class="comment">%&gt; @li @c NewValue Handle to the current callback</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> displayChangeCallback(obj,hObject,eventData)
            displayType = get(eventData.NewValue,<span class="string">'string'</span>);
            obj.setDisplayType(PAData.getStructNameFromDescription(displayType));
            obj.VIEW.draw();
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Sets display type instance variable for the view.</span>
        <span class="comment">%&gt; @param obj Instance of PAView.</span>
        <span class="comment">%&gt; @param displayType A string representing the display type structure.  Can be</span>
        <span class="comment">%&gt; @li @c timeSeries</span>
        <span class="comment">%&gt; @li @c bins</span>
        <span class="comment">%&gt; @li @c features</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> setDisplayType(obj,displayType)
            visibleProps = obj.accelObj.getVisible(displayType);
            obj.VIEW.setDisplayType(displayType,visibleProps);
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Executes a radio button group callback (i.e.</span>
        <span class="comment">%&gt; displayChangeCallback).</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param displayType String value of the radio button to set.  Can be</span>
        <span class="comment">%&gt; @li @c timeSeries</span>
        <span class="comment">%&gt; @li @c bins</span>
        <span class="comment">%&gt; @li @c features</span>
        <span class="keyword">function</span> setRadioButton(obj,displayType)
            handles = guidata(obj.VIEW.getFigHandle());
            eventStruct.EventName = <span class="string">'SelectionChanged'</span>;
            eventStruct.OldValue = get(handles.panel_displayButtonGroup,<span class="string">'selectedObject'</span>);

            <span class="keyword">switch</span> displayType
                <span class="keyword">case</span> <span class="string">'timeSeries'</span>
                    eventStruct.NewValue = handles.radio_time;
                <span class="keyword">case</span> <span class="string">'bins'</span>
                    eventStruct.NewValue = handles.radio_bins;
                <span class="keyword">case</span> <span class="string">'features'</span>
                    eventStruct.NewValue = handles.radio_features;
                <span class="keyword">otherwise</span>
                    fprintf(<span class="string">'Sorry, (%s) is not a recognized type.\n'</span>,displayType);
            <span class="keyword">end</span>

            <span class="keyword">if</span>(eventStruct.OldValue~=eventStruct.NewValue)
                set(eventStruct.NewValue,<span class="string">'value'</span>,1);
                obj.displayChangeCallback(handles.panel_displayButtonGroup,eventStruct);
            <span class="keyword">end</span>
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Callback for pressing the Go push button.  Method</span>
        <span class="comment">%&gt; determines parameters from current view settings (i.e. menu</span>
        <span class="comment">%&gt; selections for prefilter and aggregate methods).</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject Handle to the edit text widget</span>
        <span class="comment">%&gt; @param eventdata Required by MATLAB, but not used</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> button_goCallback(obj,hObject,eventdata)
            <span class="comment">%obtain the prefilter and feature extraction methods</span>
            prefilterMethod = obj.getPrefilterMethod();

            set(hObject,<span class="string">'enable'</span>,<span class="string">'off'</span>);
            obj.VIEW.showBusy(<span class="string">'Calculating Features'</span>,<span class="string">'primary'</span>);
            <span class="comment">% get the prefilter duration in minutes.</span>
            <span class="comment">% aggregateDurMin = obj.VIEW.getAggregateDuration();</span>

            <span class="comment">%Tell the model to prefilter and extract</span>
            <span class="keyword">if</span>(~strcmpi(prefilterMethod,<span class="string">'none'</span>))
                obj.accelObj.prefilter(prefilterMethod);
                obj.VIEW.enableAggregateRadioButton();

                <span class="comment">% No point of changing to the bin state right now as we</span>
                <span class="comment">% will be selecting features anyway...</span>
                <span class="comment">%                 displayType = 'bins';</span>
                <span class="comment">%                 obj.setRadioButton(displayType);</span>
            <span class="keyword">else</span>
                obj.VIEW.enableAggregateRadioButton(<span class="string">'off'</span>);
            <span class="keyword">end</span>

            <span class="comment">%extractorMethod = obj.getExtractorMethod();</span>
            extractorMethod = <span class="string">'all'</span>;
            selectedSignalTagLine = obj.getSignalSelection();

            obj.accelObj.extractFeature(selectedSignalTagLine,extractorMethod);
            obj.VIEW.enableFeatureRadioButton();

            obj.updateSecondaryFeaturesDisplay();
            <span class="comment">% obj.VIEW.appendFeatureMenu(extractorMethod);</span>
            displayType = <span class="string">'features'</span>;
            obj.setRadioButton(displayType);




            <span class="comment">% This is disabled until the first time features are</span>
            <span class="comment">% calculated.</span>
            obj.VIEW.enableTimeSeriesRadioButton();


            obj.VIEW.draw();
            obj.VIEW.showReady(<span class="string">'primary'</span>);
            set(hObject,<span class="string">'enable'</span>,<span class="string">'on'</span>);

        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Updates the secondary axes with the current features selected in the GUI</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param numFeatures Optional number of features to extract (i.e. the number of chunks that the</span>
        <span class="comment">%&gt; the study data will be broken into and the current feature</span>
        <span class="comment">%&gt; category applied to.  Default is the current frame count.</span>
        <span class="comment">%&gt; @retval heightOffset y-axis value of the top of the features</span>
        <span class="comment">%&gt; displayed.  This is helpful in determining where to stack</span>
        <span class="comment">%&gt; additional items on top of in the secondary axes.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> heightOffset = updateSecondaryFeaturesDisplay(obj,numFeatures)


            <span class="keyword">if</span>(nargin&lt;2 || isempty(numFeatures))
                numFeatures = obj.getFrameCount();
            <span class="keyword">end</span>

            featureFcn = obj.getExtractorMethod();

            <span class="comment">%  signalTagLine = obj.getSignalSelection();</span>
            <span class="comment">%  obj.drawFeatureVecPatches(featureFcn,signalTagLine,numFrames);</span>

            signalTagLines = strcat(<span class="string">'accel.'</span>,obj.accelTypeShown,<span class="string">'.'</span>,{<span class="string">'x'</span>,<span class="string">'y'</span>,<span class="string">'z'</span>,<span class="string">'vecMag'</span>})';
            numViews = obj.numViewsInSecondaryDisplay; <span class="comment">%(numel(signalTagLines)+1);</span>
            height = 1/numViews;
            heightOffset = 0;
            <span class="keyword">if</span>(any(ishandle(obj.featureHandles)))
                delete(obj.featureHandles);
            <span class="keyword">end</span>
            obj.featureHandles = [];
            <span class="keyword">for</span> s=1:numel(signalTagLines)
                signalName = signalTagLines{s};
                [featureVec, startStopDatenums] = obj.getFeatureVec(featureFcn,signalName,numFeatures);
                <span class="keyword">if</span>(s&lt;numel(signalTagLines))
                    vecHandles = obj.VIEW.addFeaturesVecToSecondaryAxes(featureVec,startStopDatenums,height,heightOffset);
                    obj.featureHandles = [obj.featureHandles(:);vecHandles(:)];
                    heightOffset = heightOffset+height;
                <span class="keyword">else</span>
                    <span class="comment">% This requires twice the height because it will have a</span>
                    <span class="comment">% feature line and heat map</span>
                    obj.VIEW.addFeaturesVecAndOverlayToSecondaryAxes(featureVec,startStopDatenums,height*2,heightOffset);
                    heightOffset = heightOffset+height*2;
                <span class="keyword">end</span>
            <span class="keyword">end</span>
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Callback from signal selection widget that triggers</span>
        <span class="comment">%&gt; the update to the secondary axes with the GUI selected feature</span>
        <span class="comment">%&gt; and signal.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject handle to the callback object.</span>
        <span class="comment">%&gt; @param eventdata Not used.  Required by MATLAB.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> updateSecondaryFeaturesDisplayCallback(obj,hObject,eventdata)
            set(hObject,<span class="string">'enable'</span>,<span class="string">'off'</span>);
            handles = guidata(hObject);
            initColor = get(handles.axes_secondary,<span class="string">'color'</span>);
            obj.VIEW.showBusy(<span class="string">'Calculating features'</span>,<span class="string">'secondary'</span>);
            numFrames = obj.getFrameCount();
            obj.updateSecondaryFeaturesDisplay(numFrames);
            set(handles.axes_secondary,<span class="string">'color'</span>,initColor);

            obj.VIEW.showReady(<span class="string">'secondary'</span>);
            set(hObject,<span class="string">'enable'</span>,<span class="string">'on'</span>);
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Retrieves current prefilter method from the GUI</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @retval prefilterMethod value of the current prefilter method.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> prefilterMethod = getPrefilterMethod(obj)
            prefilterMethods = get(obj.VIEW.menuhandle.prefilterMethod,<span class="string">'string'</span>);
            prefilterIndex =  get(obj.VIEW.menuhandle.prefilterMethod,<span class="string">'value'</span>);
            <span class="keyword">if</span>(~iscell(prefilterMethods))
                prefilterMethod = prefilterMethods;
            <span class="keyword">else</span>
                prefilterMethod = prefilterMethods{prefilterIndex};
            <span class="keyword">end</span>
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Retrieves current extractor method (i.e. function name) associated with the GUI displayed description.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @retval extractorMethod String value of the function call represented by</span>
        <span class="comment">%&gt; the current feature extraction method displayed in the VIEW's displayFeature drop down menu.</span>
        <span class="comment">%&gt; @note Results of applying the extractor method to the current</span>
        <span class="comment">%&gt; signal (selected from its dropdown menu) are displayed in the</span>
        <span class="comment">%&gt; secondary axes of PAView.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> extractorMethod = getExtractorMethod(obj)
            extractorFcns = get(obj.VIEW.menuhandle.displayFeature,<span class="string">'userdata'</span>);
            extractorIndex =  get(obj.VIEW.menuhandle.displayFeature,<span class="string">'value'</span>);
            <span class="keyword">if</span>(~iscell(extractorFcns))
                extractorMethod = extractorFcns;
            <span class="keyword">else</span>
                extractorMethod = extractorFcns{extractorIndex};
            <span class="keyword">end</span>
            <span class="keyword">if</span>(strcmpi(extractorMethod,<span class="string">'rms'</span>))
                extractorMethod = @(data)sqrt(mean(data.^2))';
            <span class="keyword">end</span>
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Sets the extractor method (i.e. function name) associated with the GUI displayed description.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param featureFcn String value of the function call represented by</span>
        <span class="comment">%&gt; the current feature extraction method displayed in the VIEW's displayFeature drop down menu.</span>
        <span class="comment">%&gt; @note No change is made if featureFcn is not found listed in</span>
        <span class="comment">%&gt; menu handle's userdata.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> setExtractorMethod(obj,featureFcn)
            extractorFcns = get(obj.VIEW.menuhandle.displayFeature,<span class="string">'userdata'</span>);
            extractorInd = find(strcmpi(extractorFcns,featureFcn));
            <span class="keyword">if</span>(~isempty(extractorInd))
                set(obj.VIEW.menuhandle.displayFeature,<span class="string">'value'</span>,extractorInd);
            <span class="keyword">end</span>
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Retrieves current signal selection from the GUI's</span>
        <span class="comment">%&gt; signalSelection dropdown menu.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @retval signalSelection The tag line of the selected signal.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> signalSelection = getSignalSelection(obj)
            signalSelections = get(obj.VIEW.menuhandle.signalSelection,<span class="string">'userdata'</span>);
            selectionIndex =  get(obj.VIEW.menuhandle.signalSelection,<span class="string">'value'</span>);
            <span class="keyword">if</span>(~iscell(signalSelections))
                signalSelection= signalSelections;
            <span class="keyword">else</span>
                signalSelection = signalSelections{selectionIndex};
            <span class="keyword">end</span>
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Sets the Signal Selection's drop down menu's value based on</span>
        <span class="comment">%&gt; the input parameter.</span>
        <span class="comment">%&gt; @param obj Instance of PAController.</span>
        <span class="comment">%&gt; @param signalTagLine String representing the tag line associated with each</span>
        <span class="comment">%&gt; signal choice selection and listed as dropdown menus userdata.</span>
        <span class="comment">%&gt; @note No change is made if signalTagLine is not found listed in</span>
        <span class="comment">%&gt; menu handle's userdata.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> signalTagLine = setSignalSelection(obj, signalTagLine)
            signalTagLines = get(obj.VIEW.menuhandle.signalSelection,<span class="string">'userdata'</span>);
            selectionIndex = find(strcmpi(signalTagLines,signalTagLine)) ;
            <span class="keyword">if</span>(isempty(selectionIndex))
                selectionIndex = 1;
            <span class="keyword">end</span>

            set(obj.VIEW.menuhandle.signalSelection,<span class="string">'value'</span>,selectionIndex);
            <span class="keyword">if</span>(isempty(obj.accelTypeShown))
                obj.accelTypeShown = <span class="string">'count'</span>;
            <span class="keyword">end</span>

            <span class="keyword">if</span>(~isempty(signalTagLines))
                v=regexp(signalTagLines{selectionIndex},<span class="string">'.+\.([^\.]+)\..*'</span>,<span class="string">'tokens'</span>);
                <span class="keyword">if</span>(~isempty(v))
                    obj.accelTypeShown = v{1}{1};
                <span class="keyword">end</span>
            <span class="keyword">end</span>
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Initializes the signal selection drop down menu using PAData's</span>
        <span class="comment">%&gt; default taglines and associated labels.</span>
        <span class="comment">%&gt; signalSelection dropdown menu.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @note Tag lines are stored as user data at indices corresponding</span>
        <span class="comment">%&gt; to the menu label descriptions.  For example, label{1} = 'X' and</span>
        <span class="comment">%&gt; userdata{1} = 'accelRaw.x'</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> initSignalSelectionMenu(obj)
            [tagLines,labels] = PAData.getDefaultTagLineLabels();
            offAccelType = obj.accelObj.getOffAccelType();
            <span class="keyword">if</span>(~isempty(offAccelType))
                cellIndices = strfind(tagLines,offAccelType);
                pruneIndices = false(size(cellIndices));
                <span class="keyword">for</span> k=1:numel(cellIndices)
                   pruneIndices(k) = ~isempty(cellIndices{k});
                <span class="keyword">end</span>
                labels(pruneIndices) = [];
                tagLines(pruneIndices) = [];
            <span class="keyword">end</span>
            set(obj.VIEW.menuhandle.signalSelection,<span class="string">'string'</span>,labels,<span class="string">'userdata'</span>,tagLines,<span class="string">'value'</span>,1);
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Callback for menu with window duration selections (values</span>
        <span class="comment">%&gt; are in seconds)</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject Handle to the edit text widget</span>
        <span class="comment">%&gt; @param eventdata Required by MATLAB, but not used</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> menu_windowDurSecCallback(obj,hObject,eventdata)
            <span class="comment">%get the array of window sizes in seconds</span>
            windowDurSec = get(hObject,<span class="string">'userdata'</span>);
            <span class="comment">% grab the currently selected window size (in seconds)</span>
            windowDurSec = windowDurSec(get(hObject,<span class="string">'value'</span>));

            <span class="comment">%change it - this internally recalculates the cur window</span>
            obj.accelObj.setWindowDurSec(windowDurSec);
            obj.setCurWindow(obj.getCurWindow());
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Callback for current window's edit textbox.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject Handle to the edit text widget</span>
        <span class="comment">%&gt; @param eventdata Required by MATLAB, but not used</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> edit_curWindowCallback(obj,hObject,eventdata)
            window = str2double(get(hObject,<span class="string">'string'</span>));
            obj.setCurWindow(window);
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Callback for aggregate size edit textbox.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject Handle to the edit text widget</span>
        <span class="comment">%&gt; @param eventdata Required by MATLAB, but not used</span>
        <span class="comment">%&gt; @note Entered values are interepreted as minutes.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> edit_aggregateCallback(obj,hObject,eventdata)
            aggregateDuration = str2double(get(hObject,<span class="string">'string'</span>));
            obj.setAggregateDurationMinutes(aggregateDuration);
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Callback for frame size in minutes edit textbox.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject Handle to the edit text widget</span>
        <span class="comment">%&gt; @param eventdata Required by MATLAB, but not used</span>
        <span class="comment">%&gt; @note Entered values are interepreted as minutes.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> edit_frameSizeMinutesCallback(obj,hObject,eventdata)
            frameDurationMinutes = str2double(get(hObject,<span class="string">'string'</span>));
            obj.setFrameDurationMinutes(frameDurationMinutes);
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Callback for frame size in hours edit textbox.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject Handle to the edit text widget</span>
        <span class="comment">%&gt; @param eventdata Required by MATLAB, but not used</span>
        <span class="comment">%&gt; @note Entered values are interepreted as hours.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> edit_frameSizeHoursCallback(obj,hObject,eventdata)
            frameDurationHours = str2double(get(hObject,<span class="string">'string'</span>));
            obj.setFrameDurationHours(frameDurationHours);
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Set the aggregate duration in minutes.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param new_aggregateDuration Aggregate duration in minutes.</span>
        <span class="comment">%&gt; @retval success True if the aggregate duration is changed, and false otherwise.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> success = setAggregateDurationMinutes(obj,new_aggregateDuration)
            success = false;
            <span class="keyword">if</span>(~isempty(obj.accelObj))
                cur_aggregateDuration = obj.accelObj.setAggregateDurationMinutes(new_aggregateDuration);
                obj.VIEW.setAggregateDurationMinutes(num2str(cur_aggregateDuration));
                <span class="keyword">if</span>(new_aggregateDuration==cur_aggregateDuration)
                    success=true;
                <span class="keyword">end</span>
            <span class="keyword">end</span>
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Set the frame size minute's units.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param new_frameDurationMinutes Frame duration minutes measure.</span>
        <span class="comment">%&gt; @retval success True if the frame duration is changed, and false otherwise.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> success = setFrameDurationMinutes(obj,new_frameDurationMinutes)
            success = false;
            <span class="keyword">if</span>(~isempty(obj.accelObj))
                cur_frameDurationMinutes = obj.accelObj.setFrameDurationMinutes(new_frameDurationMinutes);
                obj.VIEW.setFrameDurationMinutes(num2str(cur_frameDurationMinutes));
                <span class="keyword">if</span>(new_frameDurationMinutes==cur_frameDurationMinutes)
                    success=true;
                <span class="keyword">end</span>
            <span class="keyword">end</span>
        <span class="keyword">end</span>
         <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Set the frame size hour's units</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param new_frameDurationHours Hours for frame duration.</span>
        <span class="comment">%&gt; @retval success True if the frame duration is changed, and false otherwise.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> success = setFrameDurationHours(obj,new_frameDurationHours)
            success = false;
            <span class="keyword">if</span>(~isempty(obj.accelObj))
                cur_frameDurationHours = obj.accelObj.setFrameDurationHours(new_frameDurationHours);
                obj.VIEW.setFrameDurationHours(num2str(cur_frameDurationHours));
                <span class="keyword">if</span>(new_frameDurationHours==cur_frameDurationHours)
                    success=true;
                <span class="keyword">end</span>
            <span class="keyword">end</span>
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Set the current window for the instance variable accelObj</span>
        <span class="comment">%&gt; (PAData)</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param new_window Value of the new window to set.</span>
        <span class="comment">%&gt; @retval success True if the window is set successfully, and false otherwise.</span>
        <span class="comment">%&gt; @note Reason for failure include window values that are outside</span>
        <span class="comment">%&gt; the range allowed by accelObj (e.g. negative values or those</span>
        <span class="comment">%&gt; longer than the duration given.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> success = setCurWindow(obj,new_window)
            success= false;
            <span class="keyword">if</span>(~isempty(obj.accelObj))
                curWindow = obj.accelObj.setCurWindow(new_window);
                windowStartDateNum = obj.accelObj.window2datenum(new_window);
                windowEndDateNum = obj.accelObj.window2datenum(new_window+1);
                <span class="keyword">if</span>(new_window==curWindow)
                    obj.VIEW.setCurWindow(num2str(curWindow),windowStartDateNum,windowEndDateNum);
                    success=true;
                <span class="keyword">end</span>
            <span class="keyword">end</span>
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Returns the current window of the instance variable accelObj</span>
        <span class="comment">%&gt; (PAData)</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @retval window The  current window, or null if it has not been initialized.</span>
        <span class="keyword">function</span> window = getCurWindow(obj)
            <span class="keyword">if</span>(isempty(obj.accelObj))
                window = [];
            <span class="keyword">else</span>
                window = obj.accelObj.getCurWindow;
            <span class="keyword">end</span>
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Menubar callback for opening a file.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject  handle to menu_file_open (see GCBO)</span>
        <span class="comment">%&gt; @param eventdata Required by MATLAB, but not used.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> menuFileOpenCallback(obj,hObject,eventdata)
            <span class="comment">%DATA.pathname	/Volumes/SeaG 1TB/sampleData/csv</span>
            <span class="comment">%DATA.filename	700023t00c1.csv.csv</span>
            f=uigetfullfile({<span class="string">'*.csv;*.raw;*.bin'</span>,<span class="string">'All (counts, raw accelerations)'</span>;<span class="string">'*.csv'</span>,<span class="string">'Comma Separated Values'</span>;<span class="string">'*.bin'</span>,<span class="string">'Raw Acceleration (binary format: firmwares 2.2.1, 2.5.0, and 3.1.0)'</span>;<span class="string">'*.raw'</span>,<span class="string">'Raw Acceleration (comma separated values)'</span>;<span class="string">'*.gt3x'</span>,<span class="string">'Raw GT3X binary'</span>},<span class="string">'Select a file'</span>,<span class="string">'off'</span>,fullfile(obj.SETTINGS.DATA.pathname,obj.SETTINGS.DATA.filename));
            <span class="keyword">try</span>
                <span class="keyword">if</span>(~isempty(f))
                    <span class="keyword">if</span>(~strcmpi(obj.viewMode,<span class="string">'timeseries'</span>))
                        obj.setViewMode(<span class="string">'timeseries'</span>);
                    <span class="keyword">end</span>
                    obj.VIEW.showBusy(<span class="string">'Loading'</span>,<span class="string">'all'</span>);

                    obj.accelObj = PAData(f,obj.SETTINGS.DATA);

                    <span class="comment">%initialize the PAData object's visual properties</span>
                    obj.initAccelDataView(); <span class="comment">%calls show obj.VIEW.showReady() Ready...</span>

                    <span class="comment">% For testing/debugging</span>
                    <span class="comment">%                     featureFcn = 'mean';</span>
                    <span class="comment">%                     elapsedStartHour = 0;</span>
                    <span class="comment">%                     intervalDurationHours = 24;</span>
                    <span class="comment">%                     signalTagLine = obj.getSignalSelection(); %'accel.count.x';</span>
                    <span class="comment">%                     obj.accelObj.getAlignedFeatureVecs(featureFcn,signalTagLine,elapsedStartHour, intervalDurationHours);</span>


                <span class="keyword">end</span>
            <span class="keyword">catch</span> me
                showME(me);
                obj.VIEW.showReady(<span class="string">'all'</span>);
            <span class="keyword">end</span>
        <span class="keyword">end</span>


        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Menubar callback for opening a results path for use with</span>
        <span class="comment">%&gt; the results view mode.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject  handle to menu_file_open (see GCBO)</span>
        <span class="comment">%&gt; @param eventdata Required by MATLAB, but not used.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> menuFileOpenResultsPathCallback(obj,hObject,eventdata)
            initialPath = obj.resultsPathname;
            resultsPath = uigetfulldir(initialPath, <span class="string">'Select path containing padaco results output directories'</span>);
            <span class="keyword">if</span>(~isempty(resultsPath))
                <span class="comment">% Say good bye to your old stat tool if you selected a</span>
                <span class="comment">% directory.  This ensures that if a breakdown occurs in</span>
                <span class="comment">% the following steps, we do not have a previous StatTool</span>
                <span class="comment">% hanging around showing results and the user unaware that</span>
                <span class="comment">% a problem occurred (i.e. no change took place).</span>
                obj.StatTool = [];
                obj.resultsPathname = resultsPath;
                <span class="keyword">if</span>(~strcmpi(obj.viewMode,<span class="string">'results'</span>))
                    obj.VIEW.showBusy(<span class="string">'Switching to results view'</span>);
                    obj.setViewMode(<span class="string">'results'</span>);
                <span class="keyword">end</span>

                obj.VIEW.showBusy(<span class="string">'Initializing results view'</span>,<span class="string">'all'</span>);
                <span class="keyword">if</span>(obj.initResultsView())
                    obj.VIEW.showReady(<span class="string">'all'</span>);
                <span class="keyword">else</span>
                    f=warndlg(<span class="string">'I could not find any feature files in the directory you selected.  Check the editor window for further information'</span>,<span class="string">'Load error'</span>,<span class="string">'modal'</span>);
                    waitfor(f);
                    obj.VIEW.showReady();
                <span class="keyword">end</span>
            <span class="keyword">else</span>
                <span class="comment">% switch back to other mode?</span>
                <span class="comment">% No - maybe we already were in a results view</span>
                <span class="comment">% Yes - maybe we were not in a results view</span>

            <span class="keyword">end</span>
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Menubar file-&gt;screenshot callback.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject  handle to menu_file_open (see GCBO)</span>
        <span class="comment">%&gt; @param eventdata Required by MATLAB, but not used.</span>
        <span class="comment">%&gt; @param screenshotDescription String label for which part of the</span>
        <span class="comment">%&gt; GUI is to be captured.  Valid labels include:</span>
        <span class="comment">%&gt; - @c figure</span>
        <span class="comment">%&gt; - @c primaryAxes</span>
        <span class="comment">%&gt; - @c secondaryAxes</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> menuFileScreenshotCallback(obj,hObject,eventdata,screenshotDescription)

            <span class="keyword">switch</span>(lower(screenshotDescription))
                <span class="keyword">case</span> <span class="string">'figure'</span>
                    handle = obj.VIEW.figurehandle;
                <span class="keyword">case</span> <span class="string">'primaryaxes'</span>
                    handle = obj.VIEW.axeshandle.primary;
                <span class="keyword">case</span> <span class="string">'secondaryaxes'</span>
                    handle = obj.VIEW.axeshandle.secondary;
                <span class="keyword">otherwise</span>
                    handle = [];
                    fprintf(<span class="string">'%s is not a recognized description.  No screenshot will be taken'</span>,screenshotDescription);
            <span class="keyword">end</span>
            <span class="keyword">if</span>(ishandle(handle))
                <span class="keyword">if</span>(strcmpi(screenshotDescription,<span class="string">'figure'</span>))
                    obj.figureScreenshot();
                <span class="keyword">else</span>
                    obj.screenshotPathname = screencap(handle,[],obj.screenshotPathname);
                <span class="keyword">end</span>
            <span class="keyword">end</span>

        <span class="keyword">end</span>


        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Menubar callback for quitting the program.</span>
        <span class="comment">%&gt; Executes when user attempts to close padaco fig.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject    handle to menu_file_quit (see GCBO)</span>
        <span class="comment">%&gt; @param eventdata  reserved - to be defined in a future version of MATLAB</span>
        <span class="comment">%&gt; @note See startBatchProcessCallback for actual batch processing</span>
        <span class="comment">%&gt; steps.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> menuFileQuitCallback(obj,hObject,eventdata,handles)
            obj.figureCloseCallback(gcbf,eventdata,handles);
        <span class="keyword">end</span>

        <span class="comment">%&gt; @brief Call back for export menu option under menubar 'file'</span>
        <span class="comment">%&gt; option.</span>
        <span class="keyword">function</span> menu_file_exportMenu_callback(this,hObject, eventdata)
            handles = guidata(hObject); <span class="comment">%this.VIEW.getFigHandle());</span>
            <span class="keyword">if</span>(isempty(this.accelObj))
                set(handles.menu_file_export_dataObj,<span class="string">'enable'</span>,<span class="string">'off'</span>);
            <span class="keyword">else</span>
                set(handles.menu_file_export_dataObj,<span class="string">'enable'</span>,<span class="string">'on'</span>);
            <span class="keyword">end</span>
            <span class="keyword">if</span>(isempty(this.StatTool) || ~this.StatTool.hasCentroid())
                set(handles.menu_file_export_centroidObj,<span class="string">'enable'</span>,<span class="string">'off'</span>);
            <span class="keyword">else</span>
                set(handles.menu_file_export_centroidObj,<span class="string">'enable'</span>,<span class="string">'on'</span>);
            <span class="keyword">end</span>
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Menubar callback for exporting PAController's data object to the</span>
        <span class="comment">%&gt; workspace.  This is useful for debugging and developing methods</span>
        <span class="comment">%&gt; ad hoc.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject    handle to menu_viewmode_batch (see GCBO)</span>
        <span class="comment">%&gt; @param eventdata  reserved - to be defined in a future version of MATLAB</span>
        <span class="comment">%&gt; @param handles    structure with handles and user data (see GUIDATA)</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> menu_file_export_dataObj_callback(obj,hObject,~)
            dataObj = obj.accelObj;
            varName = <span class="string">'dataObject'</span>;
            <span class="keyword">try</span>
                assignin(<span class="string">'base'</span>,varName,dataObj);
                uiwait(msgbox(sprintf(<span class="string">'Data object was assigned to workspace variable %s'</span>,varName)));

            <span class="keyword">catch</span> me
                showME(me);
                uiwait(msgbox(<span class="string">'An error occurred while trying to export data object to a workspace variable.  See console for details.'</span>));
            <span class="keyword">end</span>
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Menubar callback for exporting PAController's data object to the</span>
        <span class="comment">%&gt; workspace.  This is useful for debugging and developing methods</span>
        <span class="comment">%&gt; ad hoc.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject    handle to menu_viewmode_batch (see GCBO)</span>
        <span class="comment">%&gt; @param eventdata  reserved - to be defined in a future version of MATLAB</span>
        <span class="comment">%&gt; @param handles    structure with handles and user data (see GUIDATA)</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> menu_file_export_centroidObj_callback(obj,hObject,~)
            centroidObj = obj.StatTool.getCentroidObj();
            varName = <span class="string">'centroidObj'</span>;
            <span class="keyword">try</span>
                assignin(<span class="string">'base'</span>,varName,centroidObj);
                uiwait(msgbox(sprintf(<span class="string">'Centroid object was assigned to workspace variable %s'</span>,varName)));

            <span class="keyword">catch</span> me
                showME(me);
                uiwait(msgbox(<span class="string">'An error occurred while trying to export the centroid object to a workspace variable.  See console for details.'</span>));
            <span class="keyword">end</span>
        <span class="keyword">end</span>



        <span class="comment">% --------------------------------------------------------------------</span>
</pre><h2>Settings menubar callbacks<a name="11"></a></h2><pre class="codeinput">        <span class="comment">%&gt; @brief Sets padaco's view mode to either time series or results viewing.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param viewMode A string with one of two values</span>
        <span class="comment">%&gt; - @c timeseries</span>
        <span class="comment">%&gt; - @c results</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> setViewMode(obj,viewMode)

            <span class="keyword">if</span>(~strcmpi(viewMode,<span class="string">'timeseries'</span>) &amp;&amp; ~strcmpi(viewMode,<span class="string">'results'</span>))
                warndlg(sprintf(<span class="string">'Unrecognized view mode (%s) - switching to ''timeseries'''</span>,viewMode));
                viewMode = <span class="string">'timeseries'</span>;
            <span class="keyword">end</span>

            obj.viewMode = viewMode;
            obj.VIEW.showBusy([<span class="string">'Switching to '</span>,viewMode,<span class="string">' view'</span>],<span class="string">'all'</span>);
            obj.VIEW.setViewMode(viewMode);
            obj.VIEW.showReady();
        <span class="keyword">end</span>


        <span class="comment">% Time Series viewing callback</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Menubar callback to set time series view mode.</span>
        <span class="comment">%&gt; Executes when user attempts to close padaco fig.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject    handle to menu_file_quit (see GCBO)</span>
        <span class="comment">%&gt; @param eventdata  reserved - to be defined in a future version of MATLAB</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> menuViewmodeTimeSeriesCallback(obj,hObject,eventdata)
            obj.setViewMode(<span class="string">'timeseries'</span>);
            <span class="keyword">if</span>(~isempty(obj.accelObj))
                obj.initAccelDataView();
            <span class="keyword">end</span>

        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Menubar callback for running the batch tool.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject    handle to menu_viewmode_batch (see GCBO)</span>
        <span class="comment">%&gt; @param eventdata  reserved - to be defined in a future version of MATLAB</span>
        <span class="comment">%&gt; @param handles    structure with handles and user data (see GUIDATA)</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> menuViewmodeBatchCallback(obj,hObject,eventdata)
            batchTool = PABatchTool(obj.batch);
            batchTool.addlistener(<span class="string">'BatchToolStarting'</span>,@obj.updateBatchToolSettingsCallback);
        <span class="keyword">end</span>

        <span class="keyword">function</span> updateBatchToolSettingsCallback(obj,batchToolObj,eventData)
            obj.batch = eventData.settings;
        <span class="keyword">end</span>

        <span class="comment">% Results viewing callback</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Menubar callback for switching to results view mode.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject    handle to menu_file_quit (see GCBO)</span>
        <span class="comment">%&gt; @param eventdata  reserved - to be defined in a future version of MATLAB</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> menuViewmodeResultsCallback(obj,hObject,eventdata)
            obj.setViewMode(<span class="string">'results'</span>);
            <span class="keyword">if</span>(obj.initResultsView())
                obj.VIEW.showReady(<span class="string">'all'</span>);
            <span class="keyword">end</span>

        <span class="keyword">end</span>




        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Creates a temporary figure and axes, draws an overlay</span>
        <span class="comment">%&gt; image on it using curData, saves the image to disk, and then</span>
        <span class="comment">%&gt; removes the figure from view.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param curData Instance of PAData</span>
        <span class="comment">%&gt; @param featureFcn Extractor method for obtaining features from</span>
        <span class="comment">%&gt; curData.</span>
        <span class="comment">%&gt; @param img_filename Filename to save image to.</span>
        <span class="comment">%&gt; @note The image format is determined from the extension of</span>
        <span class="comment">%&gt; img_filename (e.g. if img_filename = 'picture.jpg', then a jpeg</span>
        <span class="comment">%&gt; is used.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> save2image(obj, curData,featureFcn, img_filename)
            obj.overlayScreenshot(curData,featureFcn,img_filename);
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Returns the total frame duration (i.e. hours and minutes) in aggregated minutes.</span>
        <span class="comment">%&gt; @param obj Instance of PAData</span>
        <span class="comment">%&gt; @retval curFrameDurationMin The current frame duration as total</span>
        <span class="comment">%&gt; minutes.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> curFrameDurationTotalMin = getFrameDurationAsMinutes(obj)
            [curFrameDurationMin, curFrameDurationHour] = obj.accelObj.getFrameDuration();
            curFrameDurationTotalMin = [curFrameDurationMin, curFrameDurationHour]*[1;60];
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Returns the current study's duration as seconds.</span>
        <span class="comment">%&gt; @param obj Instance of PAData</span>
        <span class="comment">%&gt; @retval curStudyDurationSec The duration of the current study in seconds.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> curStudyDurationSec = getStudyDurationSec(obj)
            curStudyDurationSec = obj.accelObj.durationSec;
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Returns the number of frames the study can be broken into based</span>
        <span class="comment">%&gt; on the frame duration set in the GUI.</span>
        <span class="comment">%&gt; @param obj Instance of PAController.</span>
        <span class="comment">%&gt; @note The accelObj property must be set (i.e. a file must be</span>
        <span class="comment">%&gt; loaded for this function to work).</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> frameCount = getFrameCount(obj)
            frameCount = obj.accelObj.getFrameCount();
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Calculates the mean lux value for a given number of sections.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param numSections (optional) Number of patches to break the</span>
        <span class="comment">%&gt; accelObj lux time series data into and calculate the mean</span>
        <span class="comment">%&gt; lumens over.</span>
        <span class="comment">%&gt; @param paDataObj Optional instance of PAData.  Mean lumens will</span>
        <span class="comment">%&gt; be calculated from this when included, otherwise the instance</span>
        <span class="comment">%&gt; variable accelObj is used.</span>
        <span class="comment">%&gt; @retval meanLumens Vector of mean lumen values calculated</span>
        <span class="comment">%&gt; from the lux field of the accelObj PAData object instance</span>
        <span class="comment">%&gt; variable.  Vector values are in consecutive order of the section they are calculated from.</span>
        <span class="comment">%&gt; @retval startStopDatenums Nx2 matrix of datenum values whose</span>
        <span class="comment">%&gt; rows correspond to the start/stop range that the meanLumens</span>
        <span class="comment">%&gt; value (at the same row position) was derived from.</span>
        <span class="comment">%&gt; @note  Sections will not be calculated on equally lenghted</span>
        <span class="comment">%&gt; sections when numSections does not evenly divide the total number</span>
        <span class="comment">%&gt; of samples.  In this case, the last section may be shorter or</span>
        <span class="comment">%&gt; longer than the others.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> [meanLumens,startStopDatenums] = getMeanLumenPatches(obj,numSections,paDataObj)
            <span class="keyword">if</span>(nargin&lt;2 || isempty(numSections))
                numSections = 100;
            <span class="keyword">end</span>
            <span class="keyword">if</span>(nargin&lt;3) ||isempty(paDataObj)
               paDataObj = obj.accelObj;
            <span class="keyword">end</span>
            luxData = paDataObj.lux;
            indices = ceil(linspace(1,numel(luxData),numSections+1));
            meanLumens = zeros(numSections,1);
            startStopDatenums = zeros(numSections,2);
            <span class="keyword">for</span> i=1:numSections
                meanLumens(i) = mean(luxData(indices(i):indices(i+1)));
                startStopDatenums(i,:) = [paDataObj.dateTimeNum(indices(i)),paDataObj.dateTimeNum(indices(i+1))];
            <span class="keyword">end</span>
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Estimates daylight intensity across the study.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param numSections (optional) Number of chunks to estimate</span>
        <span class="comment">%&gt; daylight at across the study.  Default is 100.</span>
        <span class="comment">%&gt; @param paDataObj Optional instance of PAData.  Date time will</span>
        <span class="comment">%&gt; be calculated from this when included, otherwise date time from the</span>
        <span class="comment">%&gt; instance variable accelObj is used.</span>
        <span class="comment">%&gt; @retval daylightVector Vector of estimated daylight from the time of day at startStopDatenums.</span>
        <span class="comment">%&gt; @retval startStopDatenums Nx2 matrix of datenum values whose</span>
        <span class="comment">%&gt; rows correspond to the start/stop range that the meanLumens</span>
        <span class="comment">%&gt; value (at the same row position) was derived from.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> [daylightVector,startStopDatenums] = getDaylight(obj,numSections,paDataObj)
            <span class="keyword">if</span>(nargin&lt;2 || isempty(numSections) || numSections &lt;=1)
                numSections = 100;
            <span class="keyword">end</span>
            <span class="keyword">if</span>(nargin&lt;3) ||isempty(paDataObj)
               paDataObj = obj.accelObj;
            <span class="keyword">end</span>

            indices = ceil(linspace(1,numel(paDataObj.dateTimeNum),numSections+1));
            startStopDatenums = [paDataObj.dateTimeNum(indices(1:end-1)),paDataObj.dateTimeNum(indices(2:end))];
            [y,mo,d,H,MI,S] = datevec(mean(startStopDatenums,2));
            dayTime = [H,MI,S]*[1; 1/60; 1/3600];
<span class="comment">%             dayTime = [[H(:,1),MI(:,1),S(:,1)]*[1;1/60;1/3600], [H(:,2),MI(:,2),S(:,2)]*[1;1/60;1/3600]];</span>

            <span class="comment">% obtain the middle spot of the daytime chunk. --&gt; this does</span>
            <span class="comment">% not work because the hours flip over at 24:00.</span>
<span class="comment">%             dayTime = [H,MI,S]*[1;1;1/60;1/60;1/3600;1/3600]/2;</span>


            <span class="comment">% linear model for daylight</span>
            <span class="comment">%             daylightVector = (-abs(dayTime-12)+12)/12;</span>

            <span class="comment">% sinusoidal models for daylight</span>
            T = 24;
            <span class="comment">%             daylightVector = cos(2*pi/T*(dayTime-12));</span>
            <span class="comment">%             daylightVector = sin(pi/T*dayTime);  %just take half of a cycle here ...</span>

            daylightVector= (cos(2*pi*(dayTime-12)/T)+1)/2;  <span class="comment">%this is spread between 0 and 1; with 1 being brightest at noon.</span>

        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Calculates a desired feature for a particular acceleration object's field value.</span>
        <span class="comment">%&gt; @note This is the general form of getMeanLuxPatches</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param featureFcn Function name or handle to use to obtain</span>
        <span class="comment">%&gt; features.</span>
        <span class="comment">%&gt; @param fieldName String name of the accelObj field to obtain data from.</span>
        <span class="comment">%&gt; @note Data is obtained using dynamic indexing of</span>
        <span class="comment">%&gt; accelObj instance variable (ie.. data = obj.accelObj.(fildName))</span>
        <span class="comment">%&gt; @param numSections (optional) Number of patches to break the</span>
        <span class="comment">%&gt; accelObj time series data into and calculate the features from.</span>
        <span class="comment">%&gt; @param paDataObj Optional instance of PAData.  Date time will</span>
        <span class="comment">%&gt; be calculated from this when included, otherwise date time from the</span>
        <span class="comment">%&gt; instance variable accelObj is used.</span>
        <span class="comment">%&gt; @retval featureVec Vector of specified feature values calculated</span>
        <span class="comment">%&gt; from the specified (fieldName) field of the accelObj PAData object instance</span>
        <span class="comment">%&gt; variable.  Vector values are in consecutive order of the section they are calculated from.</span>
        <span class="comment">%&gt; @retval startStopDatenums Nx2 matrix of datenum values whose</span>
        <span class="comment">%&gt; rows correspond to the start/stop range that the feature vector</span>
        <span class="comment">%&gt; value (at the same row position) was derived from.</span>
        <span class="comment">%&gt; @note  Sections will not be calculated on equally lenghted</span>
        <span class="comment">%&gt; sections when numSections does not evenly divide the total number</span>
        <span class="comment">%&gt; of samples.  In this case, the last section may be shorter or</span>
        <span class="comment">%&gt; longer than the others.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> [featureVec,startStopDatenums] = getFeatureVec(obj,featureFcn,fieldName,numSections,paDataObj)
            <span class="keyword">if</span>(nargin&lt;2 || isempty(numSections) || numSections &lt;=1)
                numSections = 100;
            <span class="keyword">end</span>

             <span class="keyword">if</span>(nargin&lt;5) ||isempty(paDataObj)
               paDataObj = obj.accelObj;
            <span class="keyword">end</span>
            timeSeriesStruct = paDataObj.getStruct(<span class="string">'all'</span>,<span class="string">'timeSeries'</span>);
            fieldData = eval([<span class="string">'timeSeriesStruct.'</span>,fieldName]);
            indices = ceil(linspace(1,numel(fieldData),numSections+1));
            featureVec = zeros(numSections,1);
            startStopDatenums = zeros(numSections,2);
            <span class="keyword">for</span> i=1:numSections
                featureVec(i) = feval(featureFcn,fieldData(indices(i):indices(i+1)));
                startStopDatenums(i,:) = [paDataObj.dateTimeNum(indices(i)),paDataObj.dateTimeNum(indices(i+1))];
            <span class="keyword">end</span>
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Calculates a desired feature for a particular acceleration object's field value.</span>
        <span class="comment">%&gt; @note This is the general form of getMeanLuxPatches</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param featureFcn Function name or handle to use to obtain</span>
        <span class="comment">%&gt; features.</span>
        <span class="comment">%&gt; @param fieldName String name of the accelObj field to obtain data from.</span>
        <span class="comment">%&gt; @note Data is obtained using dynamic indexing of</span>
        <span class="comment">%&gt; accelObj instance variable (ie.. data = obj.accelObj.(fildName))</span>
        <span class="comment">%&gt; @param numSections (optional) Number of patches to break the</span>
        <span class="comment">%&gt; accelObj time series data into and calculate the features from.</span>
        <span class="comment">%&gt; @param paDataObj Optional instance of PAData.  Date time will</span>
        <span class="comment">%&gt; be calculated from this when included, otherwise date time from the</span>
        <span class="comment">%&gt; instance variable accelObj is used.</span>
        <span class="comment">%&gt; @retval featureVec Vector of specified feature values calculated</span>
        <span class="comment">%&gt; from the specified (fieldName) field of the accelObj PAData object instance</span>
        <span class="comment">%&gt; variable.  Vector values are in consecutive order of the section they are calculated from.</span>
        <span class="comment">%&gt; @retval startStopDatenums Nx2 matrix of datenum values whose</span>
        <span class="comment">%&gt; rows correspond to the start/stop range that the feature vector</span>
        <span class="comment">%&gt; value (at the same row position) was derived from.</span>
        <span class="comment">%&gt; @note  Sections will not be calculated on equally lenghted</span>
        <span class="comment">%&gt; sections when numSections does not evenly divide the total number</span>
        <span class="comment">%&gt; of samples.  In this case, the last section may be shorter or</span>
        <span class="comment">%&gt; longer than the others.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> [usageVec, usageStates,startStopDatenums] = getUsageState(obj)
            paDataObj = obj.accelObj;
            [usageVec, usageStates, startStopDatenums] = paDataObj.classifyUsageState;
        <span class="keyword">end</span>
</pre><h2>context menu's for the view<a name="12"></a></h2><pre class="codeinput">        <span class="comment">% =================================================================</span>
        <span class="comment">%&gt; @brief Configure contextmenu for view's primary axes.</span>
        <span class="comment">%&gt; @param obj instance of PAController.</span>
        <span class="comment">%&gt; @retval contextmenu_mainaxes_h A contextmenu handle.  This should</span>
        <span class="comment">%&gt; be assigned to the primary axes handle of PAView.</span>
        <span class="comment">% =================================================================</span>
        <span class="keyword">function</span> contextmenu_mainaxes_h = getPrimaryAxesContextmenuHandle(obj)
</pre><h2>reference line contextmenu<a name="13"></a></h2><pre class="codeinput">            contextmenu_mainaxes_h = uicontextmenu(<span class="string">'callback'</span>,@obj.contextmenu_primaryAxes_callback);
            uimenu(contextmenu_mainaxes_h,<span class="string">'Label'</span>,<span class="string">'Unhide'</span>,<span class="string">'tag'</span>,<span class="string">'unhide'</span>);
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> contextmenu_primaryAxes_callback(obj,hObject, eventdata)
            <span class="comment">%configure sub contextmenus</span>
            unhide_h = get(hObject,<span class="string">'children'</span>);
            obj.configure_contextmenu_unhideSignals(unhide_h);
        <span class="keyword">end</span>

       <span class="comment">% =================================================================</span>
       <span class="comment">%&gt; @brief configures a contextmenu selection to be hidden or to have</span>
       <span class="comment">%&gt; attached uimenus with labels of hidden signalss displayed.</span>
       <span class="comment">%&gt; @param obj instance of PAController.</span>
       <span class="comment">%&gt; @param contextmenu_h Handle of parent contextmenu to unhide</span>
       <span class="comment">%&gt; channels.</span>
       <span class="comment">%&gt; @param eventdata Unused.</span>
       <span class="comment">% =================================================================</span>
       <span class="keyword">function</span> configure_contextmenu_unhideSignals(obj,contextmenu_h,eventdata)
       <span class="comment">% --------------------------------------------------------------------</span>
           <span class="comment">% start with a clean slate</span>
           delete(get(contextmenu_h,<span class="string">'children'</span>));
           set(contextmenu_h,<span class="string">'enable'</span>,<span class="string">'off'</span>);
           lineHandles = obj.getDisplayableLineHandles();
           <span class="keyword">for</span> h=1:numel(lineHandles)
               lineH = lineHandles(h);
               <span class="keyword">if</span>(strcmpi(get(lineH,<span class="string">'visible'</span>),<span class="string">'off'</span>))
                   tagLine = get(lineH,<span class="string">'tag'</span>);
                   set(contextmenu_h,<span class="string">'enable'</span>,<span class="string">'on'</span>);
                   uimenu(contextmenu_h,<span class="string">'Label'</span>,tagLine,<span class="string">'separator'</span>,<span class="string">'off'</span>,<span class="string">'callback'</span>,{@obj.showLineHandle_callback,lineH});
               <span class="keyword">end</span>;
           <span class="keyword">end</span>;
           set(gco,<span class="string">'selected'</span>,<span class="string">'off'</span>);

       <span class="keyword">end</span>

       <span class="comment">% --------------------------------------------------------------------</span>
       <span class="comment">%&gt; @brief Set's the visible property for the specified line handle</span>
       <span class="comment">%&gt; and its associated reference and label handles to 'on'.</span>
       <span class="comment">%&gt; @param obj Instance of PAController</span>
       <span class="comment">%&gt; @param hObject Handle of the callback object.</span>
       <span class="comment">%&gt; @param eventdata Unused.</span>
       <span class="comment">%&gt; @param lineHandle Line handle to be shown.</span>
       <span class="comment">% --------------------------------------------------------------------</span>
       <span class="keyword">function</span> showLineHandle_callback(obj,hObject,eventdata,lineHandle)
       <span class="comment">% --------------------------------------------------------------------</span>
           lineTag = get(lineHandle,<span class="string">'tag'</span>);
           tagHandles = findobj(get(lineHandle,<span class="string">'parent'</span>),<span class="string">'tag'</span>,lineTag);
           set(tagHandles,<span class="string">'visible'</span>,<span class="string">'on'</span>,<span class="string">'hittest'</span>,<span class="string">'on'</span>)
           obj.accelObj.setVisible(lineTag,<span class="string">'on'</span>);
           set(gco,<span class="string">'selected'</span>,<span class="string">'off'</span>);
       <span class="keyword">end</span>

       <span class="comment">% =================================================================</span>
       <span class="comment">%&gt; @brief Configure contextmenu for signals that will be drawn in the view.</span>
       <span class="comment">%&gt; @param obj instance of PAController.</span>
       <span class="comment">%&gt; @retval uicontextmenu_handle A contextmenu handle.  This should</span>
       <span class="comment">%&gt; be assigned to the line handles drawn by the PAController and</span>
       <span class="comment">%&gt; PAView classes.</span>
       <span class="comment">% =================================================================</span>
       <span class="keyword">function</span> uicontextmenu_handle = getLineContextmenuHandle(obj)
       <span class="comment">% --------------------------------------------------------------------</span>
           uicontextmenu_handle = uicontextmenu(<span class="string">'callback'</span>,@obj.contextmenu_line_callback);<span class="comment">%,get(parentAxes,'parent'));</span>
           uimenu(uicontextmenu_handle,<span class="string">'Label'</span>,<span class="string">'Resize'</span>,<span class="string">'separator'</span>,<span class="string">'off'</span>,<span class="string">'callback'</span>,@obj.contextmenu_line_resize_callback);
           uimenu(uicontextmenu_handle,<span class="string">'Label'</span>,<span class="string">'Use Default Scale'</span>,<span class="string">'separator'</span>,<span class="string">'off'</span>,<span class="string">'callback'</span>,@obj.contextmenu_line_defaultScale_callback,<span class="string">'tag'</span>,<span class="string">'defaultScale'</span>);
           uimenu(uicontextmenu_handle,<span class="string">'Label'</span>,<span class="string">'Move'</span>,<span class="string">'separator'</span>,<span class="string">'off'</span>,<span class="string">'callback'</span>,@obj.contextmenu_line_move_callback);
           uimenu(uicontextmenu_handle,<span class="string">'Label'</span>,<span class="string">'Change Color'</span>,<span class="string">'separator'</span>,<span class="string">'off'</span>,<span class="string">'callback'</span>,@obj.contextmenu_line_color_callback);
           <span class="comment">%            uimenu(uicontextmenu_handle,'Label','Add Reference Line','separator','on','callback',@obj.contextmenu_line_referenceline_callback);</span>
           <span class="comment">%            uimenu(uicontextmenu_handle,'Label','Align Channel','separator','off','callback',@obj.align_channels_on_axes);</span>
           uimenu(uicontextmenu_handle,<span class="string">'Label'</span>,<span class="string">'Hide'</span>,<span class="string">'separator'</span>,<span class="string">'on'</span>,<span class="string">'callback'</span>,@obj.contextmenu_line_hide_callback);
           uimenu(uicontextmenu_handle,<span class="string">'Label'</span>,<span class="string">'Copy window to clipboard'</span>,<span class="string">'separator'</span>,<span class="string">'off'</span>,<span class="string">'callback'</span>,@obj.contextmenu_window2clipboard_callback,<span class="string">'tag'</span>,<span class="string">'copy_window2clipboard'</span>);
       <span class="keyword">end</span>

       <span class="comment">% =================================================================</span>
       <span class="comment">%&gt; @brief Configure contextmenu for feature line which is drawn in the secondary axes.</span>
       <span class="comment">%&gt; @param obj instance of PAController.</span>
       <span class="comment">%&gt; @retval uicontextmenu_handle A contextmenu handle.  This should</span>
       <span class="comment">%&gt; be assigned to the line handles drawn by the PAController and</span>
       <span class="comment">%&gt; PAView classes.</span>
       <span class="comment">% =================================================================</span>
       <span class="keyword">function</span> uicontextmenu_handle = getFeatureLineContextmenuHandle(obj)
           uicontextmenu_handle = uicontextmenu();<span class="comment">%,get(parentAxes,'parent'));</span>
           uimenu(uicontextmenu_handle,<span class="string">'Label'</span>,<span class="string">'Copy to clipboard'</span>,<span class="string">'separator'</span>,<span class="string">'off'</span>,<span class="string">'callback'</span>,@obj.contextmenu_line2clipboard_callback,<span class="string">'tag'</span>,<span class="string">'copy_window2clipboard'</span>);
       <span class="keyword">end</span>


       <span class="comment">% =================================================================</span>
       <span class="comment">%&gt; @brief Contextmenu callback for primary axes line handles</span>
       <span class="comment">%&gt; @param obj instance of PAController</span>
       <span class="comment">%&gt; @param hObject Handle of callback object (unused).</span>
       <span class="comment">%&gt; @param eventdata Unused.</span>
       <span class="comment">% =================================================================</span>
       <span class="keyword">function</span> contextmenu_line_callback(obj,hObject,eventdata)
           <span class="comment">%parent context menu that pops up before any of the children contexts are</span>
           <span class="comment">%drawn...</span>
           <span class="comment">%             handles = guidata(hObject);</span>
           <span class="comment">%             parent_fig = get(hObject,'parent');</span>
           <span class="comment">%             obj_handle = get(parent_fig,'currentobject');</span>
           obj.current_linehandle = gco;
           set(gco,<span class="string">'selected'</span>,<span class="string">'on'</span>);

           lineTag = get(gco,<span class="string">'tag'</span>);
           set(obj.VIEW.texthandle.status,<span class="string">'string'</span>,lineTag);

           child_menu_handles = get(hObject,<span class="string">'children'</span>);  <span class="comment">%this is all of the handles of the children menu options</span>
           default_scale_handle = child_menu_handles(find(~cellfun(<span class="string">'isempty'</span>,strfind(get(child_menu_handles,<span class="string">'tag'</span>),<span class="string">'defaultScale'</span>)),1));

           allScale = obj.accelObj.getScale();
           curScale = eval([<span class="string">'allScale.'</span>,lineTag]);

           pStruct = PAData.getDefaultParameters;
           defaultScale = eval(strcat(<span class="string">'pStruct.scale.'</span>,lineTag));


           <span class="keyword">if</span>(curScale==defaultScale)
               set(default_scale_handle,<span class="string">'Label'</span>,sprintf(<span class="string">'Default Scale (%0.2f)'</span>,defaultScale))
               set(default_scale_handle,<span class="string">'checked'</span>,<span class="string">'on'</span>);
           <span class="keyword">else</span>
               set(default_scale_handle,<span class="string">'Label'</span>,sprintf(<span class="string">'Use Default Scale (%0.2f)'</span>,defaultScale))
               set(default_scale_handle,<span class="string">'checked'</span>,<span class="string">'off'</span>);
           <span class="keyword">end</span>;


           <span class="comment">%</span>
           <span class="comment">%             %show/hide the show filter handle</span>
           <span class="comment">%             if(isempty(channelObj.filter_data))</span>
           <span class="comment">%                 set(show_filtered_handle,'visible','off');</span>
           <span class="comment">%             else</span>
           <span class="comment">%                 set(show_filtered_handle,'visible','on');</span>
           <span class="comment">%                 if(channelObj.show_filtered)</span>
           <span class="comment">%                     set(show_filtered_handle,'Label','Show Raw Data');</span>
           <span class="comment">%                     %         set(show_filtered_handle,'checked','on');</span>
           <span class="comment">%                 else</span>
           <span class="comment">%                     set(show_filtered_handle,'Label','Show Filtered Data');</span>
           <span class="comment">%                     %         set(show_filtered_handle,'checked','off');</span>
           <span class="comment">%                 end</span>
           <span class="comment">%             end</span>
           <span class="comment">%             guidata(hObject,handles);</span>
       <span class="keyword">end</span>

       <span class="comment">% =================================================================</span>
       <span class="comment">%&gt; @brief A line handle's contextmenu 'move' callback.</span>
       <span class="comment">%&gt; @param obj instance of PAController.</span>
       <span class="comment">%&gt; @param hObject gui handle object</span>
       <span class="comment">%&gt; @param eventdata unused</span>
       <span class="comment">% =================================================================</span>
       <span class="keyword">function</span> contextmenu_line_move_callback(obj,hObject,eventdata)
           y_lim = get(obj.VIEW.axeshandle.primary,<span class="string">'ylim'</span>);

           tagLine = get(gco,<span class="string">'tag'</span>);
           set(obj.VIEW.figurehandle,<span class="string">'pointer'</span>,<span class="string">'hand'</span>,<span class="keyword">...</span>
               <span class="string">'windowbuttonmotionfcn'</span>,<span class="keyword">...</span>
               {@obj.move_line_mouseFcnCallback,tagLine,y_lim}<span class="keyword">...</span>
               );
       <span class="keyword">end</span>;

       <span class="comment">% =================================================================</span>
       <span class="comment">%&gt; @brief Channel contextmenu callback to move the selected</span>
       <span class="comment">%&gt; channel's position in the SEV.</span>
       <span class="comment">%&gt; @param obj instance of CLASS_channels_container.</span>
       <span class="comment">%&gt; @param hObject Handle of callback object (unused).</span>
       <span class="comment">%&gt; @param eventdata Unused.</span>
       <span class="comment">%&gt; @param lineTag The tag for the current selected linehandle.</span>
       <span class="comment">%&gt; @note lineTag = 'timeSeries.accelCount.x'</span>
       <span class="comment">%&gt; This is used for dynamic indexing into the accelObj's datastructs.</span>
       <span class="comment">%&gt; @param y_lim Y-axes limits; cannot move the channel above or below</span>
       <span class="comment">%&gt; these bounds.</span>
       <span class="comment">%&gt; @retval obj instance of CLASS_channels_container.</span>
       <span class="comment">% =================================================================</span>
       <span class="keyword">function</span> move_line_mouseFcnCallback(obj,hObject,eventdata,lineTag,y_lim)
           <span class="comment">%windowbuttonmotionfcn set by contextmenu_line_move_callback</span>
           <span class="comment">%axes_h is the axes that the current object (channel_object) is in</span>
           pos = get(obj.VIEW.axeshandle.primary,<span class="string">'currentpoint'</span>);
           curOffset = max(min(pos(1,2),y_lim(2)),y_lim(1));
           obj.accelObj.setOffset(lineTag,curOffset);
           obj.VIEW.draw();
       <span class="keyword">end</span>

       <span class="comment">% =================================================================</span>
       <span class="comment">%&gt; @brief Resize callback for channel object contextmenu.</span>
       <span class="comment">%&gt; @param obj instance of CLASS_channels_container.</span>
       <span class="comment">%&gt; @param hObject Handle of callback object (unused).</span>
       <span class="comment">%&gt; @param eventdata Unused.</span>
       <span class="comment">%&gt; @retval obj instance of CLASS_channels_container.</span>
       <span class="comment">% =================================================================</span>
       <span class="keyword">function</span> contextmenu_line_resize_callback(obj,hObject,eventdata)

           lineTag = get(gco,<span class="string">'tag'</span>);
           set(obj.VIEW.figurehandle,<span class="string">'pointer'</span>,<span class="string">'crosshair'</span>,<span class="string">'WindowScrollWheelFcn'</span>,<span class="keyword">...</span>
               {@obj.resize_WindowScrollWheelFcn,<span class="keyword">...</span>
               lineTag,obj.VIEW.texthandle.status});

           allScale = obj.accelObj.getScale();
           curScale = eval([<span class="string">'allScale.'</span>,lineTag]);

           <span class="comment">%show the current scale</span>
           click_str = sprintf(<span class="string">'Scale: %0.2f'</span>,curScale);
           set(obj.VIEW.texthandle.status,<span class="string">'string'</span>,click_str);

           <span class="comment">%flush the draw queue</span>
           drawnow();
       <span class="keyword">end</span>;

       <span class="comment">% =================================================================</span>
       <span class="comment">%&gt; @brief Contextmenu callback to set a line's default scale.</span>
       <span class="comment">%&gt; @param obj instance of PAController</span>
       <span class="comment">%&gt; @param hObject gui handle object</span>
       <span class="comment">%&gt; @param eventdata unused</span>
       <span class="comment">% =================================================================</span>
       <span class="keyword">function</span> contextmenu_line_defaultScale_callback(obj,hObject,eventdata)

           <span class="keyword">if</span>(strcmp(get(hObject,<span class="string">'checked'</span>),<span class="string">'off'</span>))
               set(hObject,<span class="string">'checked'</span>,<span class="string">'on'</span>);
               lineTag = get(gco,<span class="string">'tag'</span>);

               pStruct = PAData.getDefaultParameters;
               defaultScale = eval(strcat(<span class="string">'pStruct.scale.'</span>,lineTag));

               obj.accelObj.setScale(lineTag,defaultScale);
               obj.VIEW.draw();
           <span class="keyword">end</span>;
           set(gco,<span class="string">'selected'</span>,<span class="string">'off'</span>);
       <span class="keyword">end</span>


       <span class="comment">% =================================================================</span>
       <span class="comment">%&gt; @brief Contextmenu callback to set a line's color.  MATLAB's</span>
       <span class="comment">%&gt; interactive dialog is used to obtain and set the color</span>
       <span class="comment">%&gt; (uisetcolor).</span>
       <span class="comment">%&gt; @param obj instance of PAController</span>
       <span class="comment">%&gt; @param hObject gui handle object</span>
       <span class="comment">%&gt; @param eventdata unused</span>
       <span class="comment">% =================================================================</span>
       <span class="keyword">function</span> contextmenu_line_color_callback(obj, hObject, eventdata)
           lineTag = get(gco,<span class="string">'tag'</span>);
           c = get(gco,<span class="string">'color'</span>);
           c = uisetcolor(c);
           <span class="keyword">if</span>(numel(c)~=1)
               obj.accelObj.setColor(lineTag,c);
               tagHandles = findobj(get(gco,<span class="string">'parent'</span>),<span class="string">'tag'</span>,lineTag);
               set(tagHandles,<span class="string">'color'</span>,c);
           <span class="keyword">end</span>;
           set(gco,<span class="string">'selected'</span>,<span class="string">'off'</span>);
       <span class="keyword">end</span>

       <span class="comment">% =================================================================</span>
       <span class="comment">%&gt; @brief Mouse wheel callback to resize the selected channel.</span>
       <span class="comment">%&gt; @param obj instance of PAController.</span>
       <span class="comment">%&gt; @param hObject Handle of callback object (unused).</span>
       <span class="comment">%&gt; @param eventdata Mouse scroll event data.</span>
       <span class="comment">%&gt; @param lineTag The tag for the current selected linehandle.</span>
       <span class="comment">%&gt; @note lineTag = 'timeSeries.accelCount.x'</span>
       <span class="comment">%&gt; This is used for dynamic indexing into the accelObj's datastructs.</span>
       <span class="comment">%&gt; @param text_h Text handle for outputing the channel's size/scale.</span>
       <span class="comment">% =================================================================</span>
       <span class="keyword">function</span> resize_WindowScrollWheelFcn(obj,hObject,eventdata,lineTag,text_h)
           <span class="comment">%the windowwheelscrollfcn set by contextmenu_line_resize_callback</span>
           <span class="comment">%it is used to adjust the size of the selected channel object (channelObj)</span>
           scroll_step = 0.05;
           lowerbound = 0.01;

           <span class="comment">%kind of hacky</span>
           allScale = obj.accelObj.getScale();
           curScale = eval([<span class="string">'allScale.'</span>,lineTag]);


           newScale = max(lowerbound,curScale-eventdata.VerticalScrollCount*scroll_step);
           obj.accelObj.setScale(lineTag,newScale);
           obj.VIEW.draw();

           <span class="comment">%update this text scale...</span>
           click_str = sprintf(<span class="string">'Scale: %0.2f'</span>,newScale);
           set(text_h,<span class="string">'string'</span>,click_str);
       <span class="keyword">end</span>


        <span class="comment">% =================================================================</span>
        <span class="comment">%&gt; @brief Copy the selected linehandle's ydata to the system</span>
        <span class="comment">%&gt; clipboard.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject Handle of callback object (unused).</span>
        <span class="comment">%&gt; @param eventdata Unused.</span>
        <span class="comment">% =================================================================</span>
        <span class="keyword">function</span> contextmenu_window2clipboard_callback(obj,hObject,eventdata)
            data =get(obj.current_linehandle,<span class="string">'ydata'</span>);
            clipboard(<span class="string">'copy'</span>,data);
            disp([num2str(numel(data)),<span class="string">' items copied to the clipboard.  Press Control-V to access data items, or type "str=clipboard(''paste'')"'</span>]);
            set(gco,<span class="string">'selected'</span>,<span class="string">'off'</span>);
            obj.current_linehandle = [];
        <span class="keyword">end</span>

        <span class="comment">% =================================================================</span>
        <span class="comment">%&gt; @brief Copy the selected (feature) linehandle's ydata to the system</span>
        <span class="comment">%&gt; clipboard.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param hObject Handle of callback object (unused).</span>
        <span class="comment">%&gt; @param eventdata Unused.</span>
        <span class="comment">% =================================================================</span>
        <span class="keyword">function</span> contextmenu_line2clipboard_callback(obj,hObject,eventdata)
            data = get(get(hObject,<span class="string">'parent'</span>),<span class="string">'userdata'</span>);
            clipboard(<span class="string">'copy'</span>,data);
            disp([num2str(numel(data)),<span class="string">' items copied to the clipboard.  Press Control-V to access data items, or type "str=clipboard(''paste'')"'</span>]);
        <span class="keyword">end</span>
</pre><pre class="codeinput">    <span class="keyword">end</span>

    methods(Access=private)

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Initializes the display for accelerometer data viewing</span>
        <span class="comment">%&gt; using instantiated instance</span>
        <span class="comment">%&gt; variables VIEW (PAView) and accelObj (PAData)</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> initAccelDataView(obj)

            <span class="comment">% accelObj has already been initialized with default/saved</span>
            <span class="comment">% settings (i.e. obj.SETTINGS.DATA) and these are in turn</span>
            <span class="comment">% passed along to the VIEW class here and used to initialize</span>
            <span class="comment">% many of the selected widgets.</span>

            obj.VIEW.showBusy(<span class="string">'Initializing View'</span>,<span class="string">'all'</span>);

            obj.initSignalSelectionMenu();

            <span class="keyword">if</span>(strcmpi(obj.accelObj.accelType,<span class="string">'all'</span>))
                obj.accelTypeShown = <span class="string">'raw'</span>;
            <span class="keyword">else</span>
                obj.accelTypeShown = <span class="string">'count'</span>;
            <span class="keyword">end</span>

            obj.VIEW.initWithAccelData(obj.accelObj);

            <span class="comment">%set signal choice</span>
            obj.setSignalSelection(obj.SETTINGS.CONTROLLER.signalTagLine); <span class="comment">%internally sets to 1st in list if not found..</span>
            obj.setExtractorMethod(obj.SETTINGS.CONTROLLER.featureFcn);


            <span class="comment">% set the display to show time series data initially.</span>
            displayType = <span class="string">'Time Series'</span>;
            displayStructName = PAData.getStructNameFromDescription(displayType);
            obj.setRadioButton(displayStructName);
            obj.setDisplayType(displayStructName);

            <span class="comment">%but not everything is shown...</span>

            obj.setCurWindow(obj.accelObj.getCurWindow());

            <span class="comment">% Update the secondary axes</span>
            <span class="comment">% Items to display = 8;</span>
            obj.numViewsInSecondaryDisplay = 8;

            <span class="comment">% Items 1-5</span>
            <span class="comment">% Starting from the bottom of the axes - display the features</span>
            <span class="comment">% for x, y, z, vec magnitude, and 1-d values</span>
            heightOffset = obj.updateSecondaryFeaturesDisplay();

            itemsToDisplay = 3; <span class="comment">% usage state, mean lumens, daylight approx</span>
            remainingHeight = 1-heightOffset;
            height = remainingHeight/itemsToDisplay;
            <span class="keyword">if</span>(obj.accelObj.getSampleRate()&lt;=1)
                [usageVec,usageState, startStopDatenums] = obj.getUsageState();
                vecHandles = obj.VIEW.addFeaturesVecToSecondaryAxes(usageVec,obj.accelObj.dateTimeNum,height,heightOffset);
                <span class="comment">%obj.VIEW.addOverlayToSecondaryAxes(usageState,startStopDatenums,1/numRegions,curRegion/numRegions);</span>
            <span class="keyword">else</span>
                vecHandles = [];
            <span class="keyword">end</span>
            <span class="comment">% Next, add lumens intensity to secondary axes</span>
            heightOffset = heightOffset+height;
            maxLumens = 250;
            numFrames = obj.getFrameCount();
            [meanLumens,startStopDatenums] = obj.getMeanLumenPatches(numFrames);
            obj.VIEW.addOverlayToSecondaryAxes(meanLumens,startStopDatenums,height,heightOffset,maxLumens);
            <span class="comment">%             [medianLumens,startStopDatenums] = obj.getMedianLumenPatches(1000);</span>
            <span class="comment">%             obj.VIEW.addLumensOverlayToSecondaryAxes(meanLumens,startStopDatenums);</span>

            <span class="comment">% Finally Add daylight to the top.</span>
            heightOffset = heightOffset+height;
            maxDaylight = 1;
            [daylight,startStopDatenums] = obj.getDaylight(numFrames);
            obj.VIEW.addOverlayToSecondaryAxes(daylight,startStopDatenums,height-0.005,heightOffset,maxDaylight);

            obj.initCallbacks(); <span class="comment">%initialize callbacks now that we have some data we can interact with.</span>

            obj.VIEW.showReady(<span class="string">'all'</span>);

        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Initializes widgets for results view mode.  Widgets are</span>
        <span class="comment">%&gt; disabled if the resultsPathname does not exist or cannot be</span>
        <span class="comment">%&gt; found.</span>
        <span class="comment">%&gt; @param this Instance of PAController</span>
        <span class="comment">%&gt; @retval success A boolean value (true on successful initialization of the resultsPathname into padaco's view</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> success = initResultsView(this)
            success = false;
            <span class="keyword">if</span>(isdir(this.resultsPathname))
                <span class="keyword">if</span>(~isempty(this.StatTool))
                    this.StatTool.init();  <span class="comment">%calls a plot refresh</span>
                <span class="keyword">else</span>
                    this.StatTool = PAStatTool(this.VIEW.figurehandle,this.resultsPathname,this.SETTINGS.StatTool);
                <span class="keyword">end</span>

                success = this.StatTool.getCanPlot();
            <span class="keyword">end</span>
            disableFlag = ~success;
            this.VIEW.initWidgets(<span class="string">'results'</span>,disableFlag);
            <span class="keyword">if</span>(~success)
                this.StatTool = [];
                responseButton = questdlg(<span class="string">'Results output pathname is either not set or was not found.  Would you like to choose one now?'</span>,<span class="string">'Find results output path?'</span>);
                <span class="keyword">if</span>(strcmpi(responseButton,<span class="string">'yes'</span>))
                    this.menuFileOpenResultsPathCallback();
                <span class="keyword">end</span>

            <span class="keyword">end</span>
        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Returns the display type instance variable.</span>
        <span class="comment">%&gt; @param obj Instance of PAView.</span>
        <span class="comment">%&gt; @retval structName Name of the field that matches the description of the current display type used.</span>
        <span class="comment">%&gt; - @c timeSeries</span>
        <span class="comment">%&gt; - @c bins</span>
        <span class="comment">%&gt; - @c features</span>
        <span class="comment">%&gt; @note See PAData.getStructTypes()</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> structName = getDisplayType(obj)
            structName = obj.VIEW.getDisplayType();
        <span class="keyword">end</span>

        <span class="comment">% ======================================================================</span>
        <span class="comment">%&gt; @brief Returns a structure of PAControllers saveable parameters as a struct.</span>
        <span class="comment">%&gt; @param obj Instance of PAView.</span>
        <span class="comment">%&gt; @retval pStruct A structure of save parameters which include the following</span>
        <span class="comment">%&gt; fields</span>
        <span class="comment">%&gt; - @c featureFcn</span>
        <span class="comment">%&gt; - @c signalTagLine</span>
        <span class="keyword">function</span> pStruct = getSaveParameters(obj)
            pStruct.featureFcn = obj.getExtractorMethod();
            pStruct.signalTagLine = obj.getSignalSelection();
            pStruct.batch = obj.batch;
            pStruct.screenshotPathname = obj.screenshotPathname;
            pStruct.viewMode = obj.viewMode;
            pStruct.resultsPathname = obj.resultsPathname;
        <span class="keyword">end</span>

        <span class="comment">% ======================================================================</span>
        <span class="comment">%&gt; @brief Returns a structure of PAView's primary axes currently displayable line handles.</span>
        <span class="comment">%&gt; @param obj Instance of PAView.</span>
        <span class="comment">%&gt; @retval lineHandles A structure of line handles of the current display type are</span>
        <span class="comment">%&gt; showable in the primary axes (i.e. they are only not seen if the</span>
        <span class="comment">%user has set the line handle's 'visible' property to 'off'</span>
        <span class="keyword">function</span> lineHandles = getDisplayableLineHandles(obj)
           lineHandleStruct = obj.VIEW.getLinehandle(obj.getDisplayType());
           lineHandles = PAData.struct2vec(lineHandleStruct);
        <span class="keyword">end</span>

        <span class="comment">% =================================================================</span>
        <span class="comment">%&gt; @brief Channel contextmenu callback to hide the selected</span>
        <span class="comment">%&gt; channel.</span>
        <span class="comment">%&gt; @param hObject Handle of callback object (unused).</span>
        <span class="comment">%&gt; @param eventdata Unused.</span>
        <span class="comment">% =================================================================</span>
        <span class="keyword">function</span> contextmenu_line_hide_callback(obj,hObject,eventdata)
            tagLine = get(gco,<span class="string">'tag'</span>);
            parentH = get(gco,<span class="string">'parent'</span>);
            obj.accelObj.setVisible(tagLine,<span class="string">'off'</span>);

            <span class="comment">% get the siblings handles with same tagLine (e.g. label and</span>
            <span class="comment">% rereference line handles.</span>
            h = findobj(parentH,<span class="string">'tag'</span>,tagLine);
            set(h,<span class="string">'visible'</span>,<span class="string">'off'</span>,<span class="string">'hittest'</span>,<span class="string">'off'</span>); <span class="comment">% turn the hittest off so I can access contextmenus when clicking over the unseen line.</span>
            set(gco,<span class="string">'selected'</span>,<span class="string">'off'</span>);
        <span class="keyword">end</span>


        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Creates a temporary overlay from paDataObject's values</span>
        <span class="comment">%&gt; and takes a screenshot of it which is saved as img_filename.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">%&gt; @param paDataObject Instance of PAData</span>
        <span class="comment">%&gt; @param featureFcn Extractor method for obtaining features from</span>
        <span class="comment">%&gt; curData.</span>
        <span class="comment">%&gt; @param img_filename Filename (full) to save the screenshot too.</span>
        <span class="comment">%&gt; @note The image format is determined from img_filename's</span>
        <span class="comment">%&gt; extension.</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> overlayScreenshot(obj, paDataObject, featureFcn, img_filename)
            [~,~, ext] = fileparts(img_filename);
            ext = strrep(ext,<span class="string">'.'</span>,<span class="string">''</span>);  <span class="comment">%remove leading '.' when it exists (i.e. not an empty string).</span>
            <span class="keyword">if</span>(strcmpi(ext,<span class="string">'jpg'</span>))
                imgFmt = <span class="string">'-djpeg'</span>;
            <span class="keyword">else</span>
                imgFmt = strcat(<span class="string">'-d'</span>,lower(ext));
            <span class="keyword">end</span>

            fig_h = obj.VIEW.figurehandle;
            axes_copy = copyobj(obj.VIEW.axeshandle.secondary,fig_h);

            f = figure(<span class="string">'visible'</span>,<span class="string">'off'</span>,<span class="string">'paperpositionmode'</span>,<span class="string">'auto'</span>,<span class="string">'inverthardcopy'</span>,<span class="string">'on'</span>,<span class="keyword">...</span>
                <span class="string">'units'</span>,get(fig_h,<span class="string">'units'</span>),<span class="string">'position'</span>,get(fig_h,<span class="string">'position'</span>),<span class="keyword">...</span>
                <span class="string">'toolbar'</span>,<span class="string">'none'</span>,<span class="string">'menubar'</span>,<span class="string">'none'</span>);
            set(f,<span class="string">'units'</span>,<span class="string">'normalized'</span>,<span class="string">'renderer'</span>,<span class="string">'zbuffer'</span>);
            set(axes_copy,<span class="string">'parent'</span>,f);

            obj.drawOverlay(paDataObject,featureFcn,axes_copy);
            obj.cropFigure2Axes(f,axes_copy);

            set(f,<span class="string">'visible'</span>,<span class="string">'on'</span>);
            set(f,<span class="string">'clipping'</span>,<span class="string">'off'</span>);
            print(f,imgFmt,<span class="string">'-r0'</span>,img_filename);
            delete(f);
        <span class="keyword">end</span>

        <span class="comment">%&gt; Draw all parts of the overlay to axesH using paDataObject</span>
        <span class="comment">%&gt; This is used for batch processing.</span>
        <span class="keyword">function</span> [featureHandles] = drawOverlay(obj,paDataObject,featureFcn,axesH)

            numFrames = paDataObject.getFrameCount();
            maxLumens = 250;

            <span class="comment">% Modified - by adding paDataObject as secondary value.</span>
            [meanLumens,startStopDatenums] = obj.getMeanLumenPatches(numFrames,paDataObject);

            <span class="comment">% Modified - by adding axesH as second argument</span>
            obj.VIEW.addOverlayToAxes(meanLumens,startStopDatenums,1/7,5/7,maxLumens,axesH);

            maxDaylight = 1;
            <span class="comment">% Modified get daylight somehow - perhaps to include accelObj as second argument.</span>
            [daylight,startStopDatenums] = obj.getDaylight(numFrames,paDataObject);

            <span class="comment">% Modified - by adding axesH as last argument</span>
            obj.VIEW.addOverlayToAxes(daylight,startStopDatenums,1/7-0.005,6/7,maxDaylight,axesH);

            <span class="comment">% updateSecondaryFeaturesDisplay</span>
            signalTagLines = strcat(<span class="string">'accel.'</span>,paDataObject.accelType,<span class="string">'.'</span>,{<span class="string">'x'</span>,<span class="string">'y'</span>,<span class="string">'z'</span>,<span class="string">'vecMag'</span>})';
            numViews = (numel(signalTagLines)+1)+2;
            height = 1/numViews;
            heightOffset = 0;
            featureHandles = [];
            <span class="keyword">for</span> s=1:numel(signalTagLines)
                signalName = signalTagLines{s};
                <span class="comment">% Modified to pass in the paDataObj as last parameter</span>
                [featureVec, startStopDatenums] = obj.getFeatureVec(featureFcn,signalName,numFrames,paDataObject);
                <span class="keyword">if</span>(s&lt;numel(signalTagLines))
                    vecHandles = obj.VIEW.addFeaturesVecToAxes(featureVec,startStopDatenums,height,heightOffset,axesH);
                    featureHandles = [featureHandles(:);vecHandles(:)];
                <span class="keyword">else</span>
                    <span class="comment">% This requires twice the height because it will have a</span>
                    <span class="comment">% feature line and heat map</span>
                    obj.VIEW.addFeaturesVecAndOverlayToAxes(featureVec,startStopDatenums,height*2,heightOffset,axesH);

                <span class="keyword">end</span>
                heightOffset = heightOffset+height;
            <span class="keyword">end</span>

            ytickLabel = {<span class="string">'X'</span>,<span class="string">'Y'</span>,<span class="string">'Z'</span>,<span class="string">'|X,Y,Z|'</span>,<span class="string">'|X,Y,Z|'</span>,<span class="string">'Activity'</span>,<span class="string">'Lumens'</span>,<span class="string">'Daylight'</span>};
            numViews = numel(ytickLabel);
            startStopDatenum = [startStopDatenums(1),startStopDatenums(end)];
            axesProps.yticklabel = ytickLabel;
            axesProps.ytick = 1/numViews/2:1/numViews:1;
            axesProps.TickDir = <span class="string">'in'</span>;
            axesProps.TickDirMode = <span class="string">'manual'</span>;
            axesProps.TickLength = [0.001 0];


            axesProps.xlim = startStopDatenum;
            [~,~,d,h,mi,s] = datevec(diff(startStopDatenum));
            durationDays = d+h/24+mi/60/24+s/3600/24;
            <span class="keyword">if</span>(durationDays&lt;0.25)
                dateScale = 1/48; <span class="comment">%show every 30 minutes</span>
            <span class="keyword">elseif</span>(durationDays&lt;0.5)
                dateScale = 1/24; <span class="comment">%show every hour</span>
            <span class="keyword">elseif</span>(durationDays&lt;0.75)
                dateScale = 1/12; <span class="comment">%show every couple hours</span>
            <span class="keyword">elseif</span>(durationDays&lt;=1)
                dateScale = 1/6; <span class="comment">%show every four hours</span>
            <span class="keyword">elseif</span>(durationDays&lt;=2)
                dateScale = 1/3; <span class="comment">%show every 8 hours</span>
            <span class="keyword">elseif</span>(durationDays&lt;=10)
                dateScale = 1/2; <span class="comment">%show every 12 hours</span>
            <span class="keyword">else</span>
                dateScale = 1; <span class="comment">%show every 24 hours.</span>

            <span class="keyword">end</span>
            <span class="keyword">if</span>(dateScale &gt;= 1/3)
                timeDeltaSec = datenum(0,0,1)/24/3600;
                studyDatenums = startStopDatenum(1):timeDeltaSec:startStopDatenum(2);
                [~,~,~,hours,minutes,sec] = datevec(studyDatenums);
                newDayIndices = mod([hours(:),minutes(:),sec(:)]*[1;1/60;1/3600],24)==0;
<span class="comment">%                 quarterDayIndices =  mod([hours(:),min(:),sec(:)]*[1;1/60;1/3600],24/4)==0;</span>

                xTick = studyDatenums(newDayIndices);
                axesProps.XGrid = <span class="string">'on'</span>;
                axesProps.XMinorGrid = <span class="string">'off'</span>;
                axesProps.XMinorTick = <span class="string">'on'</span>;

            <span class="keyword">else</span>
                timeDelta = datenum(0,0,1)*dateScale;
                xTick = [startStopDatenum(1):timeDelta:startStopDatenum(2), startStopDatenum(2)];
                axesProps.XMinorTick = <span class="string">'off'</span>;
                axesProps.XGrid = <span class="string">'off'</span>;
            <span class="keyword">end</span>

            axesProps.gridlinestyle = <span class="string">'--'</span>;
            axesProps.YGrid = <span class="string">'off'</span>;
            axesProps.YMinorGrid = <span class="string">'off'</span>;
            axesProps.ylim = [0 1];
            axesProps.xlim = startStopDatenum;

            axesProps.XTick = xTick;
            axesProps.XTickLabel = datestr(xTick,<span class="string">'ddd HH:MM'</span>);


            fontReduction = min([4, floor(durationDays/4)]);
            axesProps.fontSize = 14-fontReduction;

            set(axesH,axesProps);

        <span class="keyword">end</span>

        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="comment">%&gt; @brief Takes a screenshot of the padaco figure.</span>
        <span class="comment">%&gt; @param obj Instance of PAController</span>
        <span class="comment">% --------------------------------------------------------------------</span>
        <span class="keyword">function</span> figureScreenshot(obj)


            filterspec = {<span class="string">'png'</span>,<span class="string">'PNG'</span>;<span class="string">'jpeg'</span>,<span class="string">'JPEG'</span>};
            save_format = {<span class="string">'-dpng'</span>,<span class="string">'-djpeg'</span>};
            <span class="keyword">if</span>(isa(obj.accelObj,<span class="string">'PAData'</span>))
                img_filename = [obj.accelObj.filename,<span class="string">'_window '</span>,num2str(obj.getCurWindow),<span class="string">'.png'</span>];
            <span class="keyword">else</span>
                img_filename = [<span class="string">'padaco_window '</span>,num2str(obj.getCurWindow),<span class="string">'.png'</span>];
            <span class="keyword">end</span>
            [img_filename, img_pathname, filterindex] = uiputfile(filterspec,<span class="string">'Screenshot name'</span>,fullfile(obj.screenshotPathname,img_filename));
            <span class="keyword">if</span> isequal(img_filename,0) || isequal(img_pathname,0)
                disp(<span class="string">'User pressed cancel'</span>);
            <span class="keyword">else</span>
                <span class="keyword">try</span>
                    <span class="keyword">if</span>(filterindex&gt;2)
                        filterindex = 1; <span class="comment">%default to .png</span>
                    <span class="keyword">end</span>
                    fig_h = obj.VIEW.figurehandle;
                    axes_copy = copyobj(obj.VIEW.axeshandle.secondary,fig_h);

                    f = figure(<span class="string">'visible'</span>,<span class="string">'off'</span>,<span class="string">'paperpositionmode'</span>,<span class="string">'auto'</span>,<span class="string">'inverthardcopy'</span>,<span class="string">'on'</span>,<span class="keyword">...</span>
                        <span class="string">'units'</span>,get(fig_h,<span class="string">'units'</span>),<span class="string">'position'</span>,get(fig_h,<span class="string">'position'</span>),<span class="keyword">...</span>
                        <span class="string">'toolbar'</span>,<span class="string">'none'</span>,<span class="string">'menubar'</span>,<span class="string">'none'</span>);
                    set(f,<span class="string">'units'</span>,<span class="string">'normalized'</span>);
                    set(axes_copy,<span class="string">'parent'</span>,f);


                    cropFigure2Axes(f,axes_copy);

                    set(f,<span class="string">'visible'</span>,<span class="string">'on'</span>);
                    set(f,<span class="string">'clipping'</span>,<span class="string">'off'</span>);



                    print(f,save_format{filterindex},<span class="string">'-r0'</span>,fullfile(img_pathname,img_filename));

                    <span class="comment">%save the screenshot</span>
                    <span class="comment">%         print(f,['-d',filterspec{filterindex,1}],'-r75',fullfile(img_pathname,img_filename));</span>
                    <span class="comment">%         print(f,fullfile(img_pathname,img_filename),['-d',filterspec{filterindex,1}]);</span>
                    <span class="comment">%         print(f,['-d',filterspec{filterindex,1}],fullfile(img_pathname,img_filename));</span>
                    <span class="comment">%         set(handles.axes1,'position',apos,'dataaspectratiomode','manual' ,'dataaspectratio',dataaspectratio,'parent',handles.sev_main_fig)</span>
                    delete(f);
                    obj.screenshotPathname = img_pathname;
                <span class="keyword">catch</span> ME
                    showME(ME);
                    <span class="comment">%         set(handles.axes1,'parent',handles.sev_main_fig);</span>
                <span class="keyword">end</span>
            <span class="keyword">end</span>
        <span class="keyword">end</span>


    <span class="keyword">end</span>

    methods (Static)

        <span class="keyword">function</span> cropFigure2Axes(fig_h,axes_h)
            <span class="comment">%places axes_h in middle of figure with handle fig_h</span>
            <span class="comment">%useful for prepping screen captures</span>

            <span class="comment">% Hyatt Moore IV</span>
            <span class="comment">% 1/16/2013</span>

            fig_units_in = get(fig_h,<span class="string">'units'</span>);
            axes_units_in = get(axes_h,<span class="string">'units'</span>);

            set(fig_h,<span class="string">'units'</span>,<span class="string">'pixels'</span>);
            set(axes_h,<span class="string">'units'</span>,<span class="string">'pixels'</span>);


            a_pos = get(axes_h,<span class="string">'position'</span>); <span class="comment">%x, y, width, height</span>
            f_pos = get(fig_h,<span class="string">'position'</span>);

            a_width = a_pos(3);
            a_height = a_pos(4);

            set(axes_h,<span class="string">'position'</span>,[a_width*0.06,a_height*0.1,a_width,a_height]);
            set(fig_h,<span class="string">'position'</span>,[f_pos(1),f_pos(2),a_width*1.1,a_height*1.2]);


            <span class="comment">%reset units to original</span>
            set(fig_h,<span class="string">'units'</span>,fig_units_in);
            set(axes_h,<span class="string">'units'</span>,axes_units_in);

        <span class="keyword">end</span>

        <span class="comment">% ======================================================================</span>
        <span class="comment">%&gt; @brief Returns a structure of PAControllers default, saveable parameters as a struct.</span>
        <span class="comment">%&gt; @retval pStruct A structure of parameters which include the following</span>
        <span class="comment">%&gt; fields</span>
        <span class="comment">%&gt; - @c featureFcn</span>
        <span class="comment">%&gt; - @c signalTagLine</span>
        <span class="keyword">function</span> pStruct = getDefaultParameters()
            [tagLines,~] = PAData.getDefaultTagLineLabels();
            featureStruct = PAData.getFeatureDescriptionStruct();
            featureFcns = fieldnames(featureStruct);
            pStruct.featureFcn = featureFcns{1};
            pStruct.signalTagLine = tagLines{1};

            pStruct.batch = PABatchTool.getDefaultParameters();

            mPath = fileparts(mfilename(<span class="string">'fullpath'</span>));
            pStruct.screenshotPathname = mPath;
            pStruct.viewMode = <span class="string">'timeseries'</span>;
            pStruct.resultsPathname = pStruct.batch.outputDirectory;
        <span class="keyword">end</span>
    <span class="keyword">end</span>


<span class="keyword">end</span>
</pre><p class="footer"><br><a href="http://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2014b</a><br></p></div><!--
##### SOURCE BEGIN #####
%> @file PAController.cpp
%> @brief PAController serves as Padaco's controller component (i.e. in the model, view, controller paradigm).
% ======================================================================
%> @brief PAController serves as the UI component of event marking in
%> the Padaco.  
%
%> In the model, view, controller paradigm, this is the
%> controller. 
classdef PAController < handle
    properties(Constant)
        versionNum = 1.5;
    end
    properties(Access=private)
        %> @brief Vector for keeping track of the feature handles that are
        %> displayed on the secondary axes field.
        featureHandles;
        %> @brief The number of items to be displayed in the secondary
        %> axes.
        numViewsInSecondaryDisplay;
        %> @brief Identifies the acceleration type ('raw' or 'count' [default])
        %> displayed in the primary and secondary axes.  This is controlled
        %> by the users signal selection via GUI dropdown menu.  See
        %> updateSecondaryFeaturesDisplayCallback
        accelTypeShown;
        
    end
    properties
        %> acceleration activity object - instance of PAData
        accelObj;
        %> Instance of PASettings - this is brought in to eliminate the need for several globals
        SETTINGS; 
        %> Instance of PAView - Padaco's view component.
        VIEW;
        %> Instance of PAModel - Padaco's model component.  See accelObj.  
        MODEL;        

        %> Instance of PAStatTool - results controller when in results view
        %> mode.
        StatTool;
        
        %> Linehandle in Padaco that is currently selected by the user.
        current_linehandle;
        
        %> cell of string choices for the marking state (off, 'marking','general')
        state_choices_cell; 
        %> string of the current selected choice
        %> handle to the figure an instance of this class is associated with
        %> struct of handles for the context menus
        contextmenuhandle; 

        %> struct of different time resolutions, field names correspond to the units of time represented in the field        
        window_resolution;
        num_windows;
        display_samples; %vector of the samples to be displayed
        shift_display_samples_delta; %number of samples to adjust display by for moving forward or back
        startDateTime;
                
        %> Struct of batch settings with fields as described by
        %PABatchTool's getDefault
        batch;
        
        %> String identifying Padaco's current view mode.  Values include
        %> - @c timeseries
        %> - @c results
        viewMode;
        
        %> Foldername of most recent screenshot.
        screenshotPathname;
        %> Foldername of most recent results output pathname used.
        resultsPathname;
        
        %> struct to keep track of various Padaco states
        STATE; 
        Padaco_loading_file_flag; %boolean set to true when initially loading a src file
        Padaco_mainaxes_ylim;
        Padaco_mainaxes_xlim;        
    end


    methods
        
        function obj = PAController(Padaco_fig_h,...
                rootPathname,...
                parameters_filename)
            if(nargin<1)
                Padaco_fig_h = [];
            end
            if(nargin<2)
                rootPathname = fileparts(mfilename('fullpath'));
            end
            
            %check to see if a settings file exists
            if(nargin<3)
                parameters_filename = '_padaco.parameters.txt';
            end;
                 
            obj.StatTool = [];

            %create/intilize the settings object            
            obj.SETTINGS = PASettings(rootPathname,parameters_filename);
            obj.batch = obj.SETTINGS.CONTROLLER.batch;
            obj.screenshotPathname = obj.SETTINGS.CONTROLLER.screenshotPathname;
            obj.resultsPathname = obj.SETTINGS.CONTROLLER.resultsPathname;
            
            obj.accelTypeShown = [];
            
            if(ishandle(Padaco_fig_h))
                obj.featureHandles = [];
                
                % Create a VIEW class
                % 1. make context menu handles for the lines
                % 2. make context menu handles for the primary axes
                uiLinecontextmenu_handle = obj.getLineContextmenuHandle();
                uiPrimaryAxescontextmenu_handle = obj.getPrimaryAxesContextmenuHandle();
                featureLineContextMenuHandle = obj.getFeatureLineContextmenuHandle();
                
                
                % initialize the view here ...?
                obj.VIEW = PAView(Padaco_fig_h,uiLinecontextmenu_handle,uiPrimaryAxescontextmenu_handle,featureLineContextMenuHandle);

                obj.VIEW.showBusy([],'all');
                
                obj.initWidgets();
                
                set(Padaco_fig_h,'CloseRequestFcn',{@obj.figureCloseCallback,guidata(Padaco_fig_h)});

                %configure the menu bar callbacks.
                obj.initMenubarCallbacks();
                
                lastViewMode = obj.SETTINGS.CONTROLLER.viewMode;
                
                % attempt to load the last set of results
                switch(lower(lastViewMode))
                    case 'results'
                        obj.menuViewmodeResultsCallback();
                    case 'timeseries'
                        obj.menuViewmodeTimeSeriesCallback();
                    case 'batch'
                        obj.menuViewmodeBatchCallback();
                    otherwise
                        % unhandled
                end

            end                
        end
        
        %% Shutdown functions        
        %> Destructor
        function close(obj)
            if(~isempty(obj.accelObj))
                obj.SETTINGS.DATA = obj.accelObj.getSaveParameters();
               
            end
            
            % update the stat tool settings if it was used successfully.
            if(~isempty(obj.StatTool) && obj.StatTool.getCanPlot())
                obj.SETTINGS.StatTool = obj.StatTool.getSaveParameters();
            end
            
            obj.SETTINGS.CONTROLLER = obj.getSaveParameters();
            obj.saveParameters(); %requires SETTINGS variable
            obj.SETTINGS = [];
            if(~isempty(obj.StatTool))
                obj.StatTool.delete();
            end
            
        end        
        
        function saveParameters(obj)
            obj.SETTINGS.saveParametersToFile();
        end
        
%         function paramStruct = getSaveParametersStruct(obj)
%             paramStruct = obj.SETTINGS.VIEW;
%         end            
        

        %% Startup configuration functions and callbacks
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Configure callbacks for the figure, menubar, and widets.
        %> Called internally during class construction.
        %> @param obj Instance of PAController
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH        
        function initCallbacks(obj)   
            figH = obj.VIEW.getFigHandle();
            
            % mouse and keyboard callbacks
            set(figH,'KeyPressFcn',@obj.keyPressCallback);
            set(figH,'KeyReleaseFcn',@obj.keyReleaseCallback);
            set(figH,'WindowButtonDownFcn',@obj.windowButtonDownCallback);
            set(figH,'WindowButtonUpFcn',@obj.windowButtonUpCallback);
        
%         function setLinehandle(obj, line_h)
%             obj.clear_handles();
%             obj.current_linehandle = line_h;
%             set(obj.current_linehandle,'selected','on');
%         end
            
            
            %configure the user interface widgets
            obj.initWidgetCallbacks();
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Executes when user attempts to close figure_padaco.
        %> @param obj Instance of PAController
        %> @param hObject    handle to menu_file_quit (see GCBO)
        %> @param eventdata  reserved - to be defined in a future version of MATLAB
        %> @param handles    structure with handles and user data (see GUIDATA)
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function figureCloseCallback(obj,hObject, eventdata, handles)
            try
                obj.close();
                delete(hObject);
            catch ME
                showME(ME);
                pause;
                killall;
            end
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief  Executes on key press with focus on figure and no controls selected.
        %> @param obj Instance of PAController
        %> @param hObject    handle to figure (gcf)
        %> @param eventdata Structure of key press information.
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function keyPressCallback(obj,hObject, eventdata)
            % key=double(get(hObject,'CurrentCharacter')); % compare the values to the list
            key=eventdata.Key;
            %             handles = guidata(hObject);
            window = obj.getCurWindow();
            
            if(strcmp(key,'add'))
                
            elseif(strcmp(key,'subtract'))
                       
            elseif(strcmp(key,'leftarrow')||strcmp(key,'pagedown'))
                %go backward 1 window
                obj.setCurWindow(window-1);                
            elseif(strcmp(key,'rightarrow')||strcmp(key,'pageup'))
                %go forward 1 window
                obj.setCurWindow(window+1);                    
            elseif(strcmp(key,'uparrow'))
                %go forward 10 windows
                obj.setCurWindow(window+10);
            elseif(strcmp(key,'downarrow'))
                %go back 10 windows
                obj.setCurWindow(window-10);                
            end
            
            if(strcmp(eventdata.Key,'shift'))
                set(obj.VIEW.getFigHandle(),'pointer','ibeam');
            end
            if(strcmp(eventdata.Modifier,'control'))
                %kill the program            
                if(strcmp(eventdata.Key,'x'))
                    delete(hObject);
                    %take screen capture of figure
                elseif(strcmp(eventdata.Key,'f'))
                    obj.figureScreenshot();
                    %take screen capture of main axes
                elseif(strcmp(eventdata.Key,'s'))
                    if(isa(obj.VIEW,'PAView') &&ishandle(obj.VIEW.axeshandle.secondary))                        
                        obj.screenshotPathname = screencap(obj.VIEW.axeshandle.secondary,[],obj.screenshotPathname);
                    end
                elseif(strcmp(eventdata.Key,'p'))
                    if(isa(obj.VIEW,'PAView') &&ishandle(obj.VIEW.axeshandle.primary))
                        obj.screenshotPathname = screencap(obj.VIEW.axeshandle.primary,[],obj.screenshotPathname);
                    end
                end
            end;
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief  Executes on key press with focus on figure and no controls selected.
        %> @param obj Instance of PAController
        %> @param hObject    handle to figure (gcf), unused
        %> @param eventdata Structure of key press information.
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function keyReleaseCallback(obj,hObject, eventdata)
            
            key=eventdata.Key;
            if(strcmp(key,'shift'))
                set(obj.VIEW.getFigHandle(),'pointer','arrow');
            end;
        end

        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief  Executes when user releases mouse click
        %> If the currentObject selected is the secondary axes, then 
        %> the current window is set to the closest window corresponding to
        %> the mouse's x-position.
        %> @param obj Instance of PAController
        %> @param hObject    handle to figure (gcf), unused
        %> @param eventData Structure of mouse press information; unused
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function windowButtonUpCallback(obj,hObject,eventData)
            selected_obj = get(hObject,'CurrentObject');            
            if(~isempty(selected_obj))
                if(selected_obj==obj.VIEW.axeshandle.secondary)
                    pos = get(selected_obj,'currentpoint');
                    clicked_datenum = pos(1); 
                    cur_window = obj.accelObj.datenum2window(clicked_datenum,obj.VIEW.getDisplayType());
                    obj.setCurWindow(cur_window);
                end;
            end;
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief  Executes when user first clicks the mouse.
        %> @param obj Instance of PAController
        %> @param hObject    handle to figure (gcf), unused
        %> @param eventData Structure of mouse press information; unused
        %> @param Note - this turns off all other mouse movement and mouse
        %> wheel callback methods.
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function windowButtonDownCallback(obj,hObject,eventData)
            if(ishandle(obj.current_linehandle))                
                set(obj.VIEW.figurehandle,'windowbuttonmotionfcn',[]);
                
                obj.deactivateLineHandle();
            end
        end
        
        function deactivateLineHandle(obj)
            set(obj.current_linehandle,'selected','off');
            obj.current_linehandle = [];
            obj.VIEW.showReady();
            set(obj.VIEW.figurehandle,'windowbuttonmotionfcn',[],'WindowScrollWheelFcn',[]);            
        end
        
        %REPLACE_WITH_DASH_DASH Menubar configuration REPLACE_WITH_DASH_DASH
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Assign figure's menubar callbacks.
        %> Called internally during class construction.
        %> @param obj Instance of PAController
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH        
        function initMenubarCallbacks(obj)
            figH = obj.VIEW.getFigHandle();
            handles = guidata(figH);
            
            %% file
            % settings and about
            set(handles.menu_file_about,'callback',@obj.menuFileAboutCallback);
            set(handles.menu_file_settings,'callback',@obj.menuFileSettingsCallback);
            
            
            %  open
            set(handles.menu_file_open,'callback',@obj.menuFileOpenCallback);
            set(handles.menu_file_open_resultspath,'callback',@obj.menuFileOpenResultsPathCallback);
            
             % screeshots
            set(handles.menu_file_screenshot_figure,'callback',{@obj.menuFileScreenshotCallback,'figure'});
            set(handles.menu_file_screenshot_primaryAxes,'callback',{@obj.menuFileScreenshotCallback,'primaryAxes'});
            set(handles.menu_file_screenshot_secondaryAxes,'callback',{@obj.menuFileScreenshotCallback,'secondaryAxes'});
            
            
             %  quit - handled in main window.
            set(handles.menu_file_quit,'callback',{@obj.menuFileQuitCallback,guidata(figH)});
            
            %% Tools
            % export
            set(handles.menu_file_export,'callback',@obj.menu_file_exportMenu_callback);            
            set(handles.menu_file_export_dataObj,'callback',@obj.menu_file_export_dataObj_callback);
            set(handles.menu_file_export_centroidObj,'callback',@obj.menu_file_export_centroidObj_callback);
            
            %% View Modes            
            set(handles.menu_viewmode_timeseries,'callback',@obj.menuViewmodeTimeSeriesCallback);
            set(handles.menu_viewmode_batch,'callback',@obj.menuViewmodeBatchCallback);
            set(handles.menu_viewmode_results,'callback',@obj.menuViewmodeResultsCallback);            
                
            
            %% Help
            set(handles.menu_help_faq,'callback',@obj.menuHelpFAQCallback);

            % enable everything
            set([
                handles.menu_file
                handles.menu_file_about
                handles.menu_file_settings
                handles.menu_file_open
                handles.menu_file_quit
                handles.menu_viewmode
                handles.menu_help
                handles.menu_help_faq
                ],'enable','on');


        end
        
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Callback to display help FAQ from the menubar help->faq menu.
        %> @param obj Instance of PAController
        %> @param hObject 
        %> @param eventdata        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function menuHelpFAQCallback(obj,hObject,eventdata)
            msg = sprintf('Help FAQ');
            web(url,'-notoolboar');
            msgbox(msg);
        end
        
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Assign figure's file->about menubar callback.
        %> @param obj Instance of PAController
        %> @param hObject 
        %> @param eventdata        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function menuFileAboutCallback(obj,hObject,eventdata)
            msg = sprintf(['Padaco version %0.2f\n',...
                '\nSponsored by Stanford University\nin a collaborative effort between\nStanford Pediatric''s Solution Science Lab and\nCivil Engineering''s Sustainable Energy Lab.\n',... 
                '\nSoftware license: To be decided',...
                '\nCopyright Hyatt Moore IV (2014-2016)\n'
                ],obj.versionNum);
            msgbox(msg);
        end
        

        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Assign figure's menubar callbacks.
        %> Called internally during class construction.
        %> @param obj Instance of PAController
        %> @param hObject 
        %> @param eventdata
        %> @param optionalSettingsName String specifying the settings to
        %> update (optional)
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH 
        function menuFileSettingsCallback(obj,hObject,eventdata,optionalSettingsName)
            if(nargin<4)
                optionalSettingsName = [];
            end
            wasModified = obj.SETTINGS.defaultsEditor(optionalSettingsName);
            if(wasModified)
                % save parameters to disk?
                fprintf('Settings have been updated.\n');
            end
        end
                
        
        function initWidgets(obj)
            
            prefilterSelection = PAData.getPrefilterMethods();
            set(obj.VIEW.menuhandle.prefilterMethod,'string',prefilterSelection,'value',1);
            
            % feature extractor
            extractorMethodDescriptions = PAData.getExtractorDescriptions(); 
            extractorStruct = PAData.getFeatureDescriptionStruct(); 
            
            
            if(isfield(extractorStruct,'usagestate'))
                extractorStruct = rmfield(extractorStruct,'usagestate');
            end
            
            extractorMethodFcns = fieldnames(extractorStruct);
            set(obj.VIEW.menuhandle.displayFeature,'string',extractorMethodDescriptions,'userdata',extractorMethodFcns,'value',1);
            
            % set(obj.menuhandle.signalSelection,'string',extractorMethods,'value',1);
            
            % Window display resolution
            windowMinSelection = {
                1,'1 s';
                2,'2 s';
                4,'4 s';
                5,'5 s';
                10,'10 s';
                %30,'30 s';
                % 60,'1 min';
                %120,'2 min';
                300,'5 min';
                600,'10 min';
                900,'15 min';
                1800,'30 min';
                3600,'1 hour';
                7200,'2 hours';
                14400,'4 hours';
                28800,'8 hours';
                43200,'12 hours';
                57600,'16 hours';
                86400,'1 day';
                86400*2,'2 days';
                86400*3,'3 days';
                86400*5,'5 days';
                86400*7,'1 week';                
            };
            
            set(obj.VIEW.menuhandle.windowDurSec,'userdata',cell2mat(windowMinSelection(:,1)), 'string',windowMinSelection(:,2),'value',5);

        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Assign callbacks to various user interface widgets.
        %> Called internally during class construction.
        %> @param obj Instance of PAController
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function initWidgetCallbacks(obj)
            handles = guidata(obj.VIEW.getFigHandle());
            set(handles.edit_curWindow,'callback',@obj.edit_curWindowCallback);
            set(handles.edit_aggregate,'callback',@obj.edit_aggregateCallback);
            set(handles.edit_frameSizeMinutes,'callback',@obj.edit_frameSizeMinutesCallback);
            set(handles.edit_frameSizeHours,'callback',@obj.edit_frameSizeHoursCallback);
            
            %initialize dropdown menu callbacks
            set(obj.VIEW.menuhandle.displayFeature,'callback',@obj.updateSecondaryFeaturesDisplayCallback);
            set(handles.menu_windowDurSec,'callback',@obj.menu_windowDurSecCallback);
            
%             set(obj.VIEW.menuhandle.prefilterMethod,'callback',[]);
%             set(obj.VIEW.menuhandle.signalSelection,'callback',[]);
%             set(obj.VIEW.menuhandle.signalSelection,'callback',@obj.updateSecondaryFeaturesDisplayCallback);
            
            set(handles.panel_displayButtonGroup,'selectionChangeFcn',@obj.displayChangeCallback);
            
            set(handles.button_go,'callback',@obj.button_goCallback);
            
            % Configure stats panel callbacks ...
            % - this is now handed in the PAStatTool.m class
            %             set([handles.check_sortvalues;
            %                 handles.check_normalizevalues;
            %                 handles.menu_feature;
            %                 handles.menu_signalsource;
            %                 handles.menu_plottype],'callback',@refreshResultsPlot);
            

        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Callback for radio button change of the panel_displayButtonGroup handle.
        %> The user can select either, 'time series', 'aggregate bins', or
        %> 'features'.  If 'Features' is selected, then the Feature dropdown
        %> menu is enabled, and is disabled otherwise.  The view is
        %> redrawn.
        %> @param obj Instance of PAController
        %> @param hObject Handle to button group panel.  
        %> @param eventData Structure of event data to include:
        %> @li @c EventName 'SelectionChanged'
        %> @li @c OldValue Handle to the previous callback
        %> @li @c NewValue Handle to the current callback
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function displayChangeCallback(obj,hObject,eventData)
            displayType = get(eventData.NewValue,'string');
            obj.setDisplayType(PAData.getStructNameFromDescription(displayType));  
            obj.VIEW.draw();
        end        
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Sets display type instance variable for the view.
        %> @param obj Instance of PAView.
        %> @param displayType A string representing the display type structure.  Can be 
        %> @li @c timeSeries
        %> @li @c bins
        %> @li @c features
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function setDisplayType(obj,displayType)
            visibleProps = obj.accelObj.getVisible(displayType);
            obj.VIEW.setDisplayType(displayType,visibleProps);
        end  
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Executes a radio button group callback (i.e.
        %> displayChangeCallback).
        %> @param obj Instance of PAController
        %> @param displayType String value of the radio button to set.  Can be
        %> @li @c timeSeries
        %> @li @c bins
        %> @li @c features        
        function setRadioButton(obj,displayType)
            handles = guidata(obj.VIEW.getFigHandle());
            eventStruct.EventName = 'SelectionChanged';
            eventStruct.OldValue = get(handles.panel_displayButtonGroup,'selectedObject');
            
            switch displayType
                case 'timeSeries'
                    eventStruct.NewValue = handles.radio_time;
                case 'bins'
                    eventStruct.NewValue = handles.radio_bins;
                case 'features'
                    eventStruct.NewValue = handles.radio_features;
                otherwise
                    fprintf('Sorry, (%s) is not a recognized type.\n',displayType);
            end
            
            if(eventStruct.OldValue~=eventStruct.NewValue)
                set(eventStruct.NewValue,'value',1);
                obj.displayChangeCallback(handles.panel_displayButtonGroup,eventStruct);
            end
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Callback for pressing the Go push button.  Method
        %> determines parameters from current view settings (i.e. menu
        %> selections for prefilter and aggregate methods).
        %> @param obj Instance of PAController
        %> @param hObject Handle to the edit text widget
        %> @param eventdata Required by MATLAB, but not used
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function button_goCallback(obj,hObject,eventdata)
            %obtain the prefilter and feature extraction methods
            prefilterMethod = obj.getPrefilterMethod();
            
            set(hObject,'enable','off');
            obj.VIEW.showBusy('Calculating Features','primary');
            % get the prefilter duration in minutes. 
            % aggregateDurMin = obj.VIEW.getAggregateDuration();
            
            %Tell the model to prefilter and extract
            if(~strcmpi(prefilterMethod,'none'))                             
                obj.accelObj.prefilter(prefilterMethod);
                obj.VIEW.enableAggregateRadioButton();
                
                % No point of changing to the bin state right now as we
                % will be selecting features anyway...
                %                 displayType = 'bins';
                %                 obj.setRadioButton(displayType);
            else
                obj.VIEW.enableAggregateRadioButton('off');
            end
            
            %extractorMethod = obj.getExtractorMethod();
            extractorMethod = 'all';            
            selectedSignalTagLine = obj.getSignalSelection();

            obj.accelObj.extractFeature(selectedSignalTagLine,extractorMethod);
            obj.VIEW.enableFeatureRadioButton();
            
            obj.updateSecondaryFeaturesDisplay();
            % obj.VIEW.appendFeatureMenu(extractorMethod);
            displayType = 'features';
            obj.setRadioButton(displayType); 
            
            
            
            
            % This is disabled until the first time features are
            % calculated.
            obj.VIEW.enableTimeSeriesRadioButton();
            
            
            obj.VIEW.draw();
            obj.VIEW.showReady('primary');
            set(hObject,'enable','on');
            
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Updates the secondary axes with the current features selected in the GUI
        %> @param obj Instance of PAController
        %> @param numFeatures Optional number of features to extract (i.e. the number of chunks that the
        %> the study data will be broken into and the current feature
        %> category applied to.  Default is the current frame count.
        %> @retval heightOffset y-axis value of the top of the features
        %> displayed.  This is helpful in determining where to stack
        %> additional items on top of in the secondary axes.
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function heightOffset = updateSecondaryFeaturesDisplay(obj,numFeatures)
            
            
            if(nargin<2 || isempty(numFeatures))
                numFeatures = obj.getFrameCount(); 
            end

            featureFcn = obj.getExtractorMethod();
            
            %  signalTagLine = obj.getSignalSelection();
            %  obj.drawFeatureVecPatches(featureFcn,signalTagLine,numFrames);
            
            signalTagLines = strcat('accel.',obj.accelTypeShown,'.',{'x','y','z','vecMag'})';
            numViews = obj.numViewsInSecondaryDisplay; %(numel(signalTagLines)+1);
            height = 1/numViews;
            heightOffset = 0;
            if(any(ishandle(obj.featureHandles)))
                delete(obj.featureHandles);
            end
            obj.featureHandles = [];
            for s=1:numel(signalTagLines)
                signalName = signalTagLines{s};
                [featureVec, startStopDatenums] = obj.getFeatureVec(featureFcn,signalName,numFeatures);
                if(s<numel(signalTagLines))
                    vecHandles = obj.VIEW.addFeaturesVecToSecondaryAxes(featureVec,startStopDatenums,height,heightOffset);                   
                    obj.featureHandles = [obj.featureHandles(:);vecHandles(:)];
                    heightOffset = heightOffset+height;
                else
                    % This requires twice the height because it will have a
                    % feature line and heat map
                    obj.VIEW.addFeaturesVecAndOverlayToSecondaryAxes(featureVec,startStopDatenums,height*2,heightOffset);
                    heightOffset = heightOffset+height*2;
                end
            end   
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Callback from signal selection widget that triggers
        %> the update to the secondary axes with the GUI selected feature
        %> and signal.
        %> @param obj Instance of PAController
        %> @param hObject handle to the callback object.
        %> @param eventdata Not used.  Required by MATLAB.
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function updateSecondaryFeaturesDisplayCallback(obj,hObject,eventdata)
            set(hObject,'enable','off');
            handles = guidata(hObject);
            initColor = get(handles.axes_secondary,'color');
            obj.VIEW.showBusy('Calculating features','secondary');
            numFrames = obj.getFrameCount();            
            obj.updateSecondaryFeaturesDisplay(numFrames);        
            set(handles.axes_secondary,'color',initColor);

            obj.VIEW.showReady('secondary');
            set(hObject,'enable','on');            
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Retrieves current prefilter method from the GUI
        %> @param obj Instance of PAController
        %> @retval prefilterMethod value of the current prefilter method.
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function prefilterMethod = getPrefilterMethod(obj)
            prefilterMethods = get(obj.VIEW.menuhandle.prefilterMethod,'string');
            prefilterIndex =  get(obj.VIEW.menuhandle.prefilterMethod,'value');
            if(~iscell(prefilterMethods))
                prefilterMethod = prefilterMethods;
            else
                prefilterMethod = prefilterMethods{prefilterIndex};
            end
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Retrieves current extractor method (i.e. function name) associated with the GUI displayed description.
        %> @param obj Instance of PAController
        %> @retval extractorMethod String value of the function call represented by
        %> the current feature extraction method displayed in the VIEW's displayFeature drop down menu.
        %> @note Results of applying the extractor method to the current
        %> signal (selected from its dropdown menu) are displayed in the
        %> secondary axes of PAView.
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function extractorMethod = getExtractorMethod(obj)
            extractorFcns = get(obj.VIEW.menuhandle.displayFeature,'userdata');
            extractorIndex =  get(obj.VIEW.menuhandle.displayFeature,'value');
            if(~iscell(extractorFcns))
                extractorMethod = extractorFcns;
            else
                extractorMethod = extractorFcns{extractorIndex};
            end
            if(strcmpi(extractorMethod,'rms'))
                extractorMethod = @(data)sqrt(mean(data.^2))';
            end
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Sets the extractor method (i.e. function name) associated with the GUI displayed description.
        %> @param obj Instance of PAController
        %> @param featureFcn String value of the function call represented by
        %> the current feature extraction method displayed in the VIEW's displayFeature drop down menu.
        %> @note No change is made if featureFcn is not found listed in
        %> menu handle's userdata.
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function setExtractorMethod(obj,featureFcn)
            extractorFcns = get(obj.VIEW.menuhandle.displayFeature,'userdata');
            extractorInd = find(strcmpi(extractorFcns,featureFcn));
            if(~isempty(extractorInd))
                set(obj.VIEW.menuhandle.displayFeature,'value',extractorInd);
            end
        end        

        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Retrieves current signal selection from the GUI's
        %> signalSelection dropdown menu.
        %> @param obj Instance of PAController
        %> @retval signalSelection The tag line of the selected signal.
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function signalSelection = getSignalSelection(obj)
            signalSelections = get(obj.VIEW.menuhandle.signalSelection,'userdata');
            selectionIndex =  get(obj.VIEW.menuhandle.signalSelection,'value');
            if(~iscell(signalSelections))
                signalSelection= signalSelections;
            else
                signalSelection = signalSelections{selectionIndex};
            end
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Sets the Signal Selection's drop down menu's value based on
        %> the input parameter.        
        %> @param obj Instance of PAController.
        %> @param signalTagLine String representing the tag line associated with each
        %> signal choice selection and listed as dropdown menus userdata.
        %> @note No change is made if signalTagLine is not found listed in
        %> menu handle's userdata.
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function signalTagLine = setSignalSelection(obj, signalTagLine)
            signalTagLines = get(obj.VIEW.menuhandle.signalSelection,'userdata');
            selectionIndex = find(strcmpi(signalTagLines,signalTagLine)) ;
            if(isempty(selectionIndex))
                selectionIndex = 1;
            end
            
            set(obj.VIEW.menuhandle.signalSelection,'value',selectionIndex);
            if(isempty(obj.accelTypeShown))
                obj.accelTypeShown = 'count';
            end
            
            if(~isempty(signalTagLines))
                v=regexp(signalTagLines{selectionIndex},'.+\.([^\.]+)\..*','tokens');
                if(~isempty(v))
                    obj.accelTypeShown = v{1}{1};
                end                
            end
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Initializes the signal selection drop down menu using PAData's 
        %> default taglines and associated labels.
        %> signalSelection dropdown menu.
        %> @param obj Instance of PAController
        %> @note Tag lines are stored as user data at indices corresponding
        %> to the menu label descriptions.  For example, label{1} = 'X' and
        %> userdata{1} = 'accelRaw.x'
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH        
        function initSignalSelectionMenu(obj)
            [tagLines,labels] = PAData.getDefaultTagLineLabels();
            offAccelType = obj.accelObj.getOffAccelType();
            if(~isempty(offAccelType))
                cellIndices = strfind(tagLines,offAccelType);
                pruneIndices = false(size(cellIndices));
                for k=1:numel(cellIndices)
                   pruneIndices(k) = ~isempty(cellIndices{k}); 
                end
                labels(pruneIndices) = [];
                tagLines(pruneIndices) = [];
            end
            set(obj.VIEW.menuhandle.signalSelection,'string',labels,'userdata',tagLines,'value',1);
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Callback for menu with window duration selections (values
        %> are in seconds)
        %> @param obj Instance of PAController
        %> @param hObject Handle to the edit text widget
        %> @param eventdata Required by MATLAB, but not used
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function menu_windowDurSecCallback(obj,hObject,eventdata)
            %get the array of window sizes in seconds
            windowDurSec = get(hObject,'userdata');
            % grab the currently selected window size (in seconds)
            windowDurSec = windowDurSec(get(hObject,'value'));
            
            %change it - this internally recalculates the cur window
            obj.accelObj.setWindowDurSec(windowDurSec);            
            obj.setCurWindow(obj.getCurWindow());
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Callback for current window's edit textbox.
        %> @param obj Instance of PAController
        %> @param hObject Handle to the edit text widget
        %> @param eventdata Required by MATLAB, but not used
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function edit_curWindowCallback(obj,hObject,eventdata)
            window = str2double(get(hObject,'string'));
            obj.setCurWindow(window);
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Callback for aggregate size edit textbox.
        %> @param obj Instance of PAController
        %> @param hObject Handle to the edit text widget
        %> @param eventdata Required by MATLAB, but not used
        %> @note Entered values are interepreted as minutes.
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function edit_aggregateCallback(obj,hObject,eventdata)
            aggregateDuration = str2double(get(hObject,'string'));
            obj.setAggregateDurationMinutes(aggregateDuration);
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Callback for frame size in minutes edit textbox.
        %> @param obj Instance of PAController
        %> @param hObject Handle to the edit text widget
        %> @param eventdata Required by MATLAB, but not used
        %> @note Entered values are interepreted as minutes.
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function edit_frameSizeMinutesCallback(obj,hObject,eventdata)
            frameDurationMinutes = str2double(get(hObject,'string'));
            obj.setFrameDurationMinutes(frameDurationMinutes);
        end 
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Callback for frame size in hours edit textbox.
        %> @param obj Instance of PAController
        %> @param hObject Handle to the edit text widget
        %> @param eventdata Required by MATLAB, but not used
        %> @note Entered values are interepreted as hours.
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function edit_frameSizeHoursCallback(obj,hObject,eventdata)
            frameDurationHours = str2double(get(hObject,'string'));
            obj.setFrameDurationHours(frameDurationHours);
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Set the aggregate duration in minutes.
        %> @param obj Instance of PAController
        %> @param new_aggregateDuration Aggregate duration in minutes.
        %> @retval success True if the aggregate duration is changed, and false otherwise.
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function success = setAggregateDurationMinutes(obj,new_aggregateDuration)
            success = false;
            if(~isempty(obj.accelObj))                
                cur_aggregateDuration = obj.accelObj.setAggregateDurationMinutes(new_aggregateDuration);
                obj.VIEW.setAggregateDurationMinutes(num2str(cur_aggregateDuration));
                if(new_aggregateDuration==cur_aggregateDuration)
                    success=true;
                end
            end
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Set the frame size minute's units.
        %> @param obj Instance of PAController
        %> @param new_frameDurationMinutes Frame duration minutes measure.
        %> @retval success True if the frame duration is changed, and false otherwise.
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function success = setFrameDurationMinutes(obj,new_frameDurationMinutes)
            success = false;
            if(~isempty(obj.accelObj))                
                cur_frameDurationMinutes = obj.accelObj.setFrameDurationMinutes(new_frameDurationMinutes);
                obj.VIEW.setFrameDurationMinutes(num2str(cur_frameDurationMinutes));
                if(new_frameDurationMinutes==cur_frameDurationMinutes)
                    success=true;
                end
            end
        end
         % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Set the frame size hour's units
        %> @param obj Instance of PAController
        %> @param new_frameDurationHours Hours for frame duration.
        %> @retval success True if the frame duration is changed, and false otherwise.
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function success = setFrameDurationHours(obj,new_frameDurationHours)
            success = false;
            if(~isempty(obj.accelObj))                
                cur_frameDurationHours = obj.accelObj.setFrameDurationHours(new_frameDurationHours);
                obj.VIEW.setFrameDurationHours(num2str(cur_frameDurationHours));
                if(new_frameDurationHours==cur_frameDurationHours)
                    success=true;
                end
            end
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Set the current window for the instance variable accelObj
        %> (PAData)
        %> @param obj Instance of PAController
        %> @param new_window Value of the new window to set.
        %> @retval success True if the window is set successfully, and false otherwise.
        %> @note Reason for failure include window values that are outside
        %> the range allowed by accelObj (e.g. negative values or those
        %> longer than the duration given.  
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function success = setCurWindow(obj,new_window)
            success= false;
            if(~isempty(obj.accelObj))                 
                curWindow = obj.accelObj.setCurWindow(new_window);
                windowStartDateNum = obj.accelObj.window2datenum(new_window);
                windowEndDateNum = obj.accelObj.window2datenum(new_window+1);
                if(new_window==curWindow)
                    obj.VIEW.setCurWindow(num2str(curWindow),windowStartDateNum,windowEndDateNum);                
                    success=true;
                end
            end
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Returns the current window of the instance variable accelObj
        %> (PAData)
        %> @param obj Instance of PAController
        %> @retval window The  current window, or null if it has not been initialized.
        function window = getCurWindow(obj)
            if(isempty(obj.accelObj))
                window = [];
            else
                window = obj.accelObj.getCurWindow;
            end
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Menubar callback for opening a file.
        %> @param obj Instance of PAController
        %> @param hObject  handle to menu_file_open (see GCBO)
        %> @param eventdata Required by MATLAB, but not used.
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function menuFileOpenCallback(obj,hObject,eventdata)
            %DATA.pathname	/Volumes/SeaG 1TB/sampleData/csv
            %DATA.filename	700023t00c1.csv.csv
            f=uigetfullfile({'*.csv;*.raw;*.bin','All (counts, raw accelerations)';'*.csv','Comma Separated Values';'*.bin','Raw Acceleration (binary format: firmwares 2.2.1, 2.5.0, and 3.1.0)';'*.raw','Raw Acceleration (comma separated values)';'*.gt3x','Raw GT3X binary'},'Select a file','off',fullfile(obj.SETTINGS.DATA.pathname,obj.SETTINGS.DATA.filename));
            try
                if(~isempty(f))
                    if(~strcmpi(obj.viewMode,'timeseries'))
                        obj.setViewMode('timeseries');
                    end
                    obj.VIEW.showBusy('Loading','all');

                    obj.accelObj = PAData(f,obj.SETTINGS.DATA);
                    
                    %initialize the PAData object's visual properties                    
                    obj.initAccelDataView(); %calls show obj.VIEW.showReady() Ready...
                    
                    % For testing/debugging
                    %                     featureFcn = 'mean';
                    %                     elapsedStartHour = 0;
                    %                     intervalDurationHours = 24;
                    %                     signalTagLine = obj.getSignalSelection(); %'accel.count.x';
                    %                     obj.accelObj.getAlignedFeatureVecs(featureFcn,signalTagLine,elapsedStartHour, intervalDurationHours);
                    
                    
                end
            catch me
                showME(me);
                obj.VIEW.showReady('all');
            end            
        end
        
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Menubar callback for opening a results path for use with
        %> the results view mode.
        %> @param obj Instance of PAController
        %> @param hObject  handle to menu_file_open (see GCBO)
        %> @param eventdata Required by MATLAB, but not used.
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function menuFileOpenResultsPathCallback(obj,hObject,eventdata)
            initialPath = obj.resultsPathname;
            resultsPath = uigetfulldir(initialPath, 'Select path containing padaco results output directories');
            if(~isempty(resultsPath))
                % Say good bye to your old stat tool if you selected a
                % directory.  This ensures that if a breakdown occurs in
                % the following steps, we do not have a previous StatTool
                % hanging around showing results and the user unaware that
                % a problem occurred (i.e. no change took place).
                obj.StatTool = [];
                obj.resultsPathname = resultsPath;               
                if(~strcmpi(obj.viewMode,'results'))
                    obj.VIEW.showBusy('Switching to results view');
                    obj.setViewMode('results');
                end
                
                obj.VIEW.showBusy('Initializing results view','all');
                if(obj.initResultsView())
                    obj.VIEW.showReady('all');
                else
                    f=warndlg('I could not find any feature files in the directory you selected.  Check the editor window for further information','Load error','modal');
                    waitfor(f);
                    obj.VIEW.showReady();
                end
            else
                % switch back to other mode?
                % No - maybe we already were in a results view
                % Yes - maybe we were not in a results view
                
            end
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Menubar file->screenshot callback.
        %> @param obj Instance of PAController
        %> @param hObject  handle to menu_file_open (see GCBO)
        %> @param eventdata Required by MATLAB, but not used.
        %> @param screenshotDescription String label for which part of the
        %> GUI is to be captured.  Valid labels include:
        %> - @c figure
        %> - @c primaryAxes
        %> - @c secondaryAxes
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function menuFileScreenshotCallback(obj,hObject,eventdata,screenshotDescription)
            
            switch(lower(screenshotDescription))
                case 'figure'
                    handle = obj.VIEW.figurehandle;
                case 'primaryaxes'
                    handle = obj.VIEW.axeshandle.primary;
                case 'secondaryaxes'                    
                    handle = obj.VIEW.axeshandle.secondary;
                otherwise
                    handle = [];
                    fprintf('%s is not a recognized description.  No screenshot will be taken',screenshotDescription);
            end
            if(ishandle(handle))
                if(strcmpi(screenshotDescription,'figure'))
                    obj.figureScreenshot();
                else
                    obj.screenshotPathname = screencap(handle,[],obj.screenshotPathname);
                end
            end
            
        end
        
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Menubar callback for quitting the program.
        %> Executes when user attempts to close padaco fig.
        %> @param obj Instance of PAController
        %> @param hObject    handle to menu_file_quit (see GCBO)
        %> @param eventdata  reserved - to be defined in a future version of MATLAB
        %> @note See startBatchProcessCallback for actual batch processing
        %> steps.
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function menuFileQuitCallback(obj,hObject,eventdata,handles)
            obj.figureCloseCallback(gcbf,eventdata,handles);
        end
        
        %> @brief Call back for export menu option under menubar 'file'
        %> option.
        function menu_file_exportMenu_callback(this,hObject, eventdata)
            handles = guidata(hObject); %this.VIEW.getFigHandle());
            if(isempty(this.accelObj))
                set(handles.menu_file_export_dataObj,'enable','off');
            else
                set(handles.menu_file_export_dataObj,'enable','on');
            end
            if(isempty(this.StatTool) || ~this.StatTool.hasCentroid())
                set(handles.menu_file_export_centroidObj,'enable','off');
            else
                set(handles.menu_file_export_centroidObj,'enable','on');
            end
        end        
                
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Menubar callback for exporting PAController's data object to the
        %> workspace.  This is useful for debugging and developing methods
        %> ad hoc.
        %> @param obj Instance of PAController
        %> @param hObject    handle to menu_viewmode_batch (see GCBO)
        %> @param eventdata  reserved - to be defined in a future version of MATLAB
        %> @param handles    structure with handles and user data (see GUIDATA)
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH        
        function menu_file_export_dataObj_callback(obj,hObject,~)
            dataObj = obj.accelObj;
            varName = 'dataObject';
            try
                assignin('base',varName,dataObj);
                uiwait(msgbox(sprintf('Data object was assigned to workspace variable %s',varName)));

            catch me
                showME(me);
                uiwait(msgbox('An error occurred while trying to export data object to a workspace variable.  See console for details.'));
            end
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Menubar callback for exporting PAController's data object to the
        %> workspace.  This is useful for debugging and developing methods
        %> ad hoc.
        %> @param obj Instance of PAController
        %> @param hObject    handle to menu_viewmode_batch (see GCBO)
        %> @param eventdata  reserved - to be defined in a future version of MATLAB
        %> @param handles    structure with handles and user data (see GUIDATA)
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH        
        function menu_file_export_centroidObj_callback(obj,hObject,~)
            centroidObj = obj.StatTool.getCentroidObj();
            varName = 'centroidObj';
            try
                assignin('base',varName,centroidObj);
                uiwait(msgbox(sprintf('Centroid object was assigned to workspace variable %s',varName)));

            catch me
                showME(me);
                uiwait(msgbox('An error occurred while trying to export the centroid object to a workspace variable.  See console for details.'));
            end
        end
        
                
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %% Settings menubar callbacks
        %> @brief Sets padaco's view mode to either time series or results viewing.
        %> @param obj Instance of PAController
        %> @param viewMode A string with one of two values
        %> - @c timeseries
        %> - @c results
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH        
        function setViewMode(obj,viewMode)
            
            if(~strcmpi(viewMode,'timeseries') && ~strcmpi(viewMode,'results'))
                warndlg(sprintf('Unrecognized view mode (%s) - switching to ''timeseries''',viewMode));
                viewMode = 'timeseries';
            end
            
            obj.viewMode = viewMode;              
            obj.VIEW.showBusy(['Switching to ',viewMode,' view'],'all');   
            obj.VIEW.setViewMode(viewMode);
            obj.VIEW.showReady();
        end
        
        
        % Time Series viewing callback
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Menubar callback to set time series view mode.
        %> Executes when user attempts to close padaco fig.
        %> @param obj Instance of PAController
        %> @param hObject    handle to menu_file_quit (see GCBO)
        %> @param eventdata  reserved - to be defined in a future version of MATLAB
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH        
        function menuViewmodeTimeSeriesCallback(obj,hObject,eventdata)           
            obj.setViewMode('timeseries');
            if(~isempty(obj.accelObj))
                obj.initAccelDataView();
            end
            
        end   
                
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Menubar callback for running the batch tool.
        %> @param obj Instance of PAController
        %> @param hObject    handle to menu_viewmode_batch (see GCBO)
        %> @param eventdata  reserved - to be defined in a future version of MATLAB
        %> @param handles    structure with handles and user data (see GUIDATA)
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH        
        function menuViewmodeBatchCallback(obj,hObject,eventdata)           
            batchTool = PABatchTool(obj.batch);
            batchTool.addlistener('BatchToolStarting',@obj.updateBatchToolSettingsCallback);
        end        
        
        function updateBatchToolSettingsCallback(obj,batchToolObj,eventData)
            obj.batch = eventData.settings;
        end
        
        % Results viewing callback
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Menubar callback for switching to results view mode.
        %> @param obj Instance of PAController
        %> @param hObject    handle to menu_file_quit (see GCBO)
        %> @param eventdata  reserved - to be defined in a future version of MATLAB
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH        
        function menuViewmodeResultsCallback(obj,hObject,eventdata)           
            obj.setViewMode('results');
            if(obj.initResultsView())  
                obj.VIEW.showReady('all');
            end
            
        end        
        

       
            
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Creates a temporary figure and axes, draws an overlay
        %> image on it using curData, saves the image to disk, and then
        %> removes the figure from view.
        %> @param obj Instance of PAController
        %> @param curData Instance of PAData
        %> @param featureFcn Extractor method for obtaining features from
        %> curData.
        %> @param img_filename Filename to save image to.  
        %> @note The image format is determined from the extension of
        %> img_filename (e.g. if img_filename = 'picture.jpg', then a jpeg
        %> is used.  
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function save2image(obj, curData,featureFcn, img_filename)
            obj.overlayScreenshot(curData,featureFcn,img_filename);
        end

        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Returns the total frame duration (i.e. hours and minutes) in aggregated minutes.
        %> @param obj Instance of PAData
        %> @retval curFrameDurationMin The current frame duration as total
        %> minutes.        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function curFrameDurationTotalMin = getFrameDurationAsMinutes(obj)
            [curFrameDurationMin, curFrameDurationHour] = obj.accelObj.getFrameDuration();
            curFrameDurationTotalMin = [curFrameDurationMin, curFrameDurationHour]*[1;60];
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Returns the current study's duration as seconds.
        %> @param obj Instance of PAData
        %> @retval curStudyDurationSec The duration of the current study in seconds.        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function curStudyDurationSec = getStudyDurationSec(obj)
            curStudyDurationSec = obj.accelObj.durationSec;
        end

        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Returns the number of frames the study can be broken into based
        %> on the frame duration set in the GUI.
        %> @param obj Instance of PAController.
        %> @note The accelObj property must be set (i.e. a file must be
        %> loaded for this function to work).        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function frameCount = getFrameCount(obj)
            frameCount = obj.accelObj.getFrameCount();
        end        
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Calculates the mean lux value for a given number of sections.
        %> @param obj Instance of PAController
        %> @param numSections (optional) Number of patches to break the
        %> accelObj lux time series data into and calculate the mean
        %> lumens over.
        %> @param paDataObj Optional instance of PAData.  Mean lumens will
        %> be calculated from this when included, otherwise the instance
        %> variable accelObj is used.
        %> @retval meanLumens Vector of mean lumen values calculated
        %> from the lux field of the accelObj PAData object instance
        %> variable.  Vector values are in consecutive order of the section they are calculated from.
        %> @retval startStopDatenums Nx2 matrix of datenum values whose
        %> rows correspond to the start/stop range that the meanLumens
        %> value (at the same row position) was derived from.
        %> @note  Sections will not be calculated on equally lenghted        
        %> sections when numSections does not evenly divide the total number
        %> of samples.  In this case, the last section may be shorter or
        %> longer than the others.
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function [meanLumens,startStopDatenums] = getMeanLumenPatches(obj,numSections,paDataObj)
            if(nargin<2 || isempty(numSections))
                numSections = 100;
            end
            if(nargin<3) ||isempty(paDataObj)
               paDataObj = obj.accelObj; 
            end
            luxData = paDataObj.lux;
            indices = ceil(linspace(1,numel(luxData),numSections+1));
            meanLumens = zeros(numSections,1);
            startStopDatenums = zeros(numSections,2);
            for i=1:numSections
                meanLumens(i) = mean(luxData(indices(i):indices(i+1)));
                startStopDatenums(i,:) = [paDataObj.dateTimeNum(indices(i)),paDataObj.dateTimeNum(indices(i+1))];
            end
        end        
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Estimates daylight intensity across the study.
        %> @param obj Instance of PAController
        %> @param numSections (optional) Number of chunks to estimate
        %> daylight at across the study.  Default is 100.
        %> @param paDataObj Optional instance of PAData.  Date time will
        %> be calculated from this when included, otherwise date time from the
        %> instance variable accelObj is used.
        %> @retval daylightVector Vector of estimated daylight from the time of day at startStopDatenums.
        %> @retval startStopDatenums Nx2 matrix of datenum values whose
        %> rows correspond to the start/stop range that the meanLumens
        %> value (at the same row position) was derived from.
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function [daylightVector,startStopDatenums] = getDaylight(obj,numSections,paDataObj)
            if(nargin<2 || isempty(numSections) || numSections <=1)
                numSections = 100;
            end
            if(nargin<3) ||isempty(paDataObj)
               paDataObj = obj.accelObj; 
            end
            
            indices = ceil(linspace(1,numel(paDataObj.dateTimeNum),numSections+1));
            startStopDatenums = [paDataObj.dateTimeNum(indices(1:end-1)),paDataObj.dateTimeNum(indices(2:end))];
            [y,mo,d,H,MI,S] = datevec(mean(startStopDatenums,2));
            dayTime = [H,MI,S]*[1; 1/60; 1/3600];
%             dayTime = [[H(:,1),MI(:,1),S(:,1)]*[1;1/60;1/3600], [H(:,2),MI(:,2),S(:,2)]*[1;1/60;1/3600]];
     
            % obtain the middle spot of the daytime chunk. REPLACE_WITH_DASH_DASH> this does
            % not work because the hours flip over at 24:00.
%             dayTime = [H,MI,S]*[1;1;1/60;1/60;1/3600;1/3600]/2;
            
            
            % linear model for daylight
            %             daylightVector = (-abs(dayTime-12)+12)/12;
            
            % sinusoidal models for daylight
            T = 24;
            %             daylightVector = cos(2*pi/T*(dayTime-12));
            %             daylightVector = sin(pi/T*dayTime);  %just take half of a cycle here ...
            
            daylightVector= (cos(2*pi*(dayTime-12)/T)+1)/2;  %this is spread between 0 and 1; with 1 being brightest at noon.
            
        end     
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Calculates a desired feature for a particular acceleration object's field value.
        %> @note This is the general form of getMeanLuxPatches
        %> @param obj Instance of PAController
        %> @param featureFcn Function name or handle to use to obtain
        %> features.
        %> @param fieldName String name of the accelObj field to obtain data from.  
        %> @note Data is obtained using dynamic indexing of
        %> accelObj instance variable (ie.. data = obj.accelObj.(fildName))
        %> @param numSections (optional) Number of patches to break the
        %> accelObj time series data into and calculate the features from.
        %> @param paDataObj Optional instance of PAData.  Date time will
        %> be calculated from this when included, otherwise date time from the
        %> instance variable accelObj is used.
        %> @retval featureVec Vector of specified feature values calculated
        %> from the specified (fieldName) field of the accelObj PAData object instance
        %> variable.  Vector values are in consecutive order of the section they are calculated from.
        %> @retval startStopDatenums Nx2 matrix of datenum values whose
        %> rows correspond to the start/stop range that the feature vector
        %> value (at the same row position) was derived from.
        %> @note  Sections will not be calculated on equally lenghted        
        %> sections when numSections does not evenly divide the total number
        %> of samples.  In this case, the last section may be shorter or
        %> longer than the others.
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function [featureVec,startStopDatenums] = getFeatureVec(obj,featureFcn,fieldName,numSections,paDataObj)
            if(nargin<2 || isempty(numSections) || numSections <=1)
                numSections = 100;
            end
            
             if(nargin<5) ||isempty(paDataObj)
               paDataObj = obj.accelObj; 
            end
            timeSeriesStruct = paDataObj.getStruct('all','timeSeries');
            fieldData = eval(['timeSeriesStruct.',fieldName]);
            indices = ceil(linspace(1,numel(fieldData),numSections+1));
            featureVec = zeros(numSections,1);
            startStopDatenums = zeros(numSections,2);
            for i=1:numSections
                featureVec(i) = feval(featureFcn,fieldData(indices(i):indices(i+1)));
                startStopDatenums(i,:) = [paDataObj.dateTimeNum(indices(i)),paDataObj.dateTimeNum(indices(i+1))];
            end
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Calculates a desired feature for a particular acceleration object's field value.
        %> @note This is the general form of getMeanLuxPatches
        %> @param obj Instance of PAController
        %> @param featureFcn Function name or handle to use to obtain
        %> features.
        %> @param fieldName String name of the accelObj field to obtain data from.  
        %> @note Data is obtained using dynamic indexing of
        %> accelObj instance variable (ie.. data = obj.accelObj.(fildName))
        %> @param numSections (optional) Number of patches to break the
        %> accelObj time series data into and calculate the features from.
        %> @param paDataObj Optional instance of PAData.  Date time will
        %> be calculated from this when included, otherwise date time from the
        %> instance variable accelObj is used.
        %> @retval featureVec Vector of specified feature values calculated
        %> from the specified (fieldName) field of the accelObj PAData object instance
        %> variable.  Vector values are in consecutive order of the section they are calculated from.
        %> @retval startStopDatenums Nx2 matrix of datenum values whose
        %> rows correspond to the start/stop range that the feature vector
        %> value (at the same row position) was derived from.
        %> @note  Sections will not be calculated on equally lenghted        
        %> sections when numSections does not evenly divide the total number
        %> of samples.  In this case, the last section may be shorter or
        %> longer than the others.
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function [usageVec, usageStates,startStopDatenums] = getUsageState(obj)
            paDataObj = obj.accelObj;
            [usageVec, usageStates, startStopDatenums] = paDataObj.classifyUsageState;             
        end
                
        %% context menu's for the view
        
        % =================================================================
        %> @brief Configure contextmenu for view's primary axes.
        %> @param obj instance of PAController.
        %> @retval contextmenu_mainaxes_h A contextmenu handle.  This should
        %> be assigned to the primary axes handle of PAView.
        % =================================================================
        function contextmenu_mainaxes_h = getPrimaryAxesContextmenuHandle(obj)
            %%% reference line contextmenu            
            contextmenu_mainaxes_h = uicontextmenu('callback',@obj.contextmenu_primaryAxes_callback);
            uimenu(contextmenu_mainaxes_h,'Label','Unhide','tag','unhide');            
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function contextmenu_primaryAxes_callback(obj,hObject, eventdata)
            %configure sub contextmenus
            unhide_h = get(hObject,'children');
            obj.configure_contextmenu_unhideSignals(unhide_h);
        end
        
       % =================================================================
       %> @brief configures a contextmenu selection to be hidden or to have
       %> attached uimenus with labels of hidden signalss displayed.  
       %> @param obj instance of PAController.
       %> @param contextmenu_h Handle of parent contextmenu to unhide
       %> channels.
       %> @param eventdata Unused.
       % =================================================================
       function configure_contextmenu_unhideSignals(obj,contextmenu_h,eventdata)           
       % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH          
           % start with a clean slate
           delete(get(contextmenu_h,'children'));
           set(contextmenu_h,'enable','off');
           lineHandles = obj.getDisplayableLineHandles();
           for h=1:numel(lineHandles)
               lineH = lineHandles(h);               
               if(strcmpi(get(lineH,'visible'),'off'))
                   tagLine = get(lineH,'tag');
                   set(contextmenu_h,'enable','on');
                   uimenu(contextmenu_h,'Label',tagLine,'separator','off','callback',{@obj.showLineHandle_callback,lineH});
               end;
           end;
           set(gco,'selected','off');
           
       end
       
       % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
       %> @brief Set's the visible property for the specified line handle
       %> and its associated reference and label handles to 'on'.
       %> @param obj Instance of PAController
       %> @param hObject Handle of the callback object.
       %> @param eventdata Unused.
       %> @param lineHandle Line handle to be shown.
       % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
       function showLineHandle_callback(obj,hObject,eventdata,lineHandle)
       % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
           lineTag = get(lineHandle,'tag');
           tagHandles = findobj(get(lineHandle,'parent'),'tag',lineTag);
           set(tagHandles,'visible','on','hittest','on')
           obj.accelObj.setVisible(lineTag,'on');
           set(gco,'selected','off');           
       end
       
       % =================================================================
       %> @brief Configure contextmenu for signals that will be drawn in the view.
       %> @param obj instance of PAController.
       %> @retval uicontextmenu_handle A contextmenu handle.  This should
       %> be assigned to the line handles drawn by the PAController and
       %> PAView classes.
       % =================================================================
       function uicontextmenu_handle = getLineContextmenuHandle(obj)           
       % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
           uicontextmenu_handle = uicontextmenu('callback',@obj.contextmenu_line_callback);%,get(parentAxes,'parent'));
           uimenu(uicontextmenu_handle,'Label','Resize','separator','off','callback',@obj.contextmenu_line_resize_callback);
           uimenu(uicontextmenu_handle,'Label','Use Default Scale','separator','off','callback',@obj.contextmenu_line_defaultScale_callback,'tag','defaultScale');
           uimenu(uicontextmenu_handle,'Label','Move','separator','off','callback',@obj.contextmenu_line_move_callback);
           uimenu(uicontextmenu_handle,'Label','Change Color','separator','off','callback',@obj.contextmenu_line_color_callback);
           %            uimenu(uicontextmenu_handle,'Label','Add Reference Line','separator','on','callback',@obj.contextmenu_line_referenceline_callback);
           %            uimenu(uicontextmenu_handle,'Label','Align Channel','separator','off','callback',@obj.align_channels_on_axes);
           uimenu(uicontextmenu_handle,'Label','Hide','separator','on','callback',@obj.contextmenu_line_hide_callback);
           uimenu(uicontextmenu_handle,'Label','Copy window to clipboard','separator','off','callback',@obj.contextmenu_window2clipboard_callback,'tag','copy_window2clipboard');
       end
       
       % =================================================================
       %> @brief Configure contextmenu for feature line which is drawn in the secondary axes.
       %> @param obj instance of PAController.
       %> @retval uicontextmenu_handle A contextmenu handle.  This should
       %> be assigned to the line handles drawn by the PAController and
       %> PAView classes.
       % =================================================================
       function uicontextmenu_handle = getFeatureLineContextmenuHandle(obj)           
           uicontextmenu_handle = uicontextmenu();%,get(parentAxes,'parent'));
           uimenu(uicontextmenu_handle,'Label','Copy to clipboard','separator','off','callback',@obj.contextmenu_line2clipboard_callback,'tag','copy_window2clipboard');
       end
       
       
       % =================================================================
       %> @brief Contextmenu callback for primary axes line handles
       %> @param obj instance of PAController
       %> @param hObject Handle of callback object (unused).
       %> @param eventdata Unused.
       % =================================================================
       function contextmenu_line_callback(obj,hObject,eventdata)
           %parent context menu that pops up before any of the children contexts are
           %drawn...
           %             handles = guidata(hObject);
           %             parent_fig = get(hObject,'parent');
           %             obj_handle = get(parent_fig,'currentobject');
           obj.current_linehandle = gco;
           set(gco,'selected','on');
           
           lineTag = get(gco,'tag');
           set(obj.VIEW.texthandle.status,'string',lineTag);
           
           child_menu_handles = get(hObject,'children');  %this is all of the handles of the children menu options
           default_scale_handle = child_menu_handles(find(~cellfun('isempty',strfind(get(child_menu_handles,'tag'),'defaultScale')),1));
           
           allScale = obj.accelObj.getScale();
           curScale = eval(['allScale.',lineTag]);
           
           pStruct = PAData.getDefaultParameters;
           defaultScale = eval(strcat('pStruct.scale.',lineTag));
           
           
           if(curScale==defaultScale)
               set(default_scale_handle,'Label',sprintf('Default Scale (%0.2f)',defaultScale))
               set(default_scale_handle,'checked','on');
           else
               set(default_scale_handle,'Label',sprintf('Use Default Scale (%0.2f)',defaultScale))
               set(default_scale_handle,'checked','off');
           end;
           
           
           %
           %             %show/hide the show filter handle
           %             if(isempty(channelObj.filter_data))
           %                 set(show_filtered_handle,'visible','off');
           %             else
           %                 set(show_filtered_handle,'visible','on');
           %                 if(channelObj.show_filtered)
           %                     set(show_filtered_handle,'Label','Show Raw Data');
           %                     %         set(show_filtered_handle,'checked','on');
           %                 else
           %                     set(show_filtered_handle,'Label','Show Filtered Data');
           %                     %         set(show_filtered_handle,'checked','off');
           %                 end
           %             end
           %             guidata(hObject,handles);
       end
       
       % =================================================================
       %> @brief A line handle's contextmenu 'move' callback.
       %> @param obj instance of PAController.
       %> @param hObject gui handle object
       %> @param eventdata unused
       % =================================================================
       function contextmenu_line_move_callback(obj,hObject,eventdata)
           y_lim = get(obj.VIEW.axeshandle.primary,'ylim');
           
           tagLine = get(gco,'tag');
           set(obj.VIEW.figurehandle,'pointer','hand',...
               'windowbuttonmotionfcn',...
               {@obj.move_line_mouseFcnCallback,tagLine,y_lim}...
               );
       end;
      
       % =================================================================
       %> @brief Channel contextmenu callback to move the selected
       %> channel's position in the SEV.
       %> @param obj instance of CLASS_channels_container.
       %> @param hObject Handle of callback object (unused).
       %> @param eventdata Unused.
       %> @param lineTag The tag for the current selected linehandle.
       %> @note lineTag = 'timeSeries.accelCount.x'
       %> This is used for dynamic indexing into the accelObj's datastructs.
       %> @param y_lim Y-axes limits; cannot move the channel above or below
       %> these bounds.
       %> @retval obj instance of CLASS_channels_container.
       % =================================================================
       function move_line_mouseFcnCallback(obj,hObject,eventdata,lineTag,y_lim)
           %windowbuttonmotionfcn set by contextmenu_line_move_callback
           %axes_h is the axes that the current object (channel_object) is in
           pos = get(obj.VIEW.axeshandle.primary,'currentpoint');
           curOffset = max(min(pos(1,2),y_lim(2)),y_lim(1));
           obj.accelObj.setOffset(lineTag,curOffset);
           obj.VIEW.draw();
       end
       
       % =================================================================
       %> @brief Resize callback for channel object contextmenu.
       %> @param obj instance of CLASS_channels_container.
       %> @param hObject Handle of callback object (unused).
       %> @param eventdata Unused.
       %> @retval obj instance of CLASS_channels_container.
       % =================================================================
       function contextmenu_line_resize_callback(obj,hObject,eventdata)
           
           lineTag = get(gco,'tag');
           set(obj.VIEW.figurehandle,'pointer','crosshair','WindowScrollWheelFcn',...
               {@obj.resize_WindowScrollWheelFcn,...
               lineTag,obj.VIEW.texthandle.status});
           
           allScale = obj.accelObj.getScale();
           curScale = eval(['allScale.',lineTag]);
           
           %show the current scale
           click_str = sprintf('Scale: %0.2f',curScale);
           set(obj.VIEW.texthandle.status,'string',click_str);
           
           %flush the draw queue
           drawnow();
       end;
       
       % =================================================================
       %> @brief Contextmenu callback to set a line's default scale.
       %> @param obj instance of PAController
       %> @param hObject gui handle object
       %> @param eventdata unused
       % =================================================================
       function contextmenu_line_defaultScale_callback(obj,hObject,eventdata)
           
           if(strcmp(get(hObject,'checked'),'off'))
               set(hObject,'checked','on');
               lineTag = get(gco,'tag');
               
               pStruct = PAData.getDefaultParameters;
               defaultScale = eval(strcat('pStruct.scale.',lineTag));
               
               obj.accelObj.setScale(lineTag,defaultScale);
               obj.VIEW.draw();
           end;
           set(gco,'selected','off');
       end
       
       
       % =================================================================
       %> @brief Contextmenu callback to set a line's color.  MATLAB's
       %> interactive dialog is used to obtain and set the color
       %> (uisetcolor).
       %> @param obj instance of PAController
       %> @param hObject gui handle object
       %> @param eventdata unused
       % =================================================================
       function contextmenu_line_color_callback(obj, hObject, eventdata)
           lineTag = get(gco,'tag');
           c = get(gco,'color');
           c = uisetcolor(c);
           if(numel(c)~=1)
               obj.accelObj.setColor(lineTag,c);
               tagHandles = findobj(get(gco,'parent'),'tag',lineTag);
               set(tagHandles,'color',c);
           end;
           set(gco,'selected','off');
       end
       
       % =================================================================
       %> @brief Mouse wheel callback to resize the selected channel.
       %> @param obj instance of PAController.
       %> @param hObject Handle of callback object (unused).
       %> @param eventdata Mouse scroll event data.
       %> @param lineTag The tag for the current selected linehandle.
       %> @note lineTag = 'timeSeries.accelCount.x'
       %> This is used for dynamic indexing into the accelObj's datastructs.
       %> @param text_h Text handle for outputing the channel's size/scale.
       % =================================================================
       function resize_WindowScrollWheelFcn(obj,hObject,eventdata,lineTag,text_h)
           %the windowwheelscrollfcn set by contextmenu_line_resize_callback
           %it is used to adjust the size of the selected channel object (channelObj)
           scroll_step = 0.05;
           lowerbound = 0.01;
           
           %kind of hacky
           allScale = obj.accelObj.getScale();
           curScale = eval(['allScale.',lineTag]);
           
           
           newScale = max(lowerbound,curScale-eventdata.VerticalScrollCount*scroll_step);
           obj.accelObj.setScale(lineTag,newScale);
           obj.VIEW.draw();
           
           %update this text scale...
           click_str = sprintf('Scale: %0.2f',newScale);
           set(text_h,'string',click_str);
       end
       
       
        % =================================================================
        %> @brief Copy the selected linehandle's ydata to the system
        %> clipboard.
        %> @param obj Instance of PAController
        %> @param hObject Handle of callback object (unused).
        %> @param eventdata Unused.
        % =================================================================
        function contextmenu_window2clipboard_callback(obj,hObject,eventdata)
            data =get(obj.current_linehandle,'ydata');
            clipboard('copy',data);
            disp([num2str(numel(data)),' items copied to the clipboard.  Press Control-V to access data items, or type "str=clipboard(''paste'')"']);
            set(gco,'selected','off');
            obj.current_linehandle = [];
        end
        
        % =================================================================
        %> @brief Copy the selected (feature) linehandle's ydata to the system
        %> clipboard.
        %> @param obj Instance of PAController
        %> @param hObject Handle of callback object (unused).
        %> @param eventdata Unused.
        % =================================================================
        function contextmenu_line2clipboard_callback(obj,hObject,eventdata)
            data = get(get(hObject,'parent'),'userdata');            
            clipboard('copy',data);
            disp([num2str(numel(data)),' items copied to the clipboard.  Press Control-V to access data items, or type "str=clipboard(''paste'')"']);
        end
        

       
        
    end
    
    methods(Access=private)
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Initializes the display for accelerometer data viewing
        %> using instantiated instance
        %> variables VIEW (PAView) and accelObj (PAData)
        %> @param obj Instance of PAController
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function initAccelDataView(obj)
            
            % accelObj has already been initialized with default/saved
            % settings (i.e. obj.SETTINGS.DATA) and these are in turn
            % passed along to the VIEW class here and used to initialize 
            % many of the selected widgets.

            obj.VIEW.showBusy('Initializing View','all');
            
            obj.initSignalSelectionMenu();
            
            if(strcmpi(obj.accelObj.accelType,'all'))
                obj.accelTypeShown = 'raw';
            else
                obj.accelTypeShown = 'count';
            end               
                
            obj.VIEW.initWithAccelData(obj.accelObj);
            
            %set signal choice 
            obj.setSignalSelection(obj.SETTINGS.CONTROLLER.signalTagLine); %internally sets to 1st in list if not found..
            obj.setExtractorMethod(obj.SETTINGS.CONTROLLER.featureFcn);
         
            
            % set the display to show time series data initially.
            displayType = 'Time Series';
            displayStructName = PAData.getStructNameFromDescription(displayType);
            obj.setRadioButton(displayStructName);
            obj.setDisplayType(displayStructName);
            
            %but not everything is shown...
            
            obj.setCurWindow(obj.accelObj.getCurWindow());
            
            % Update the secondary axes 
            % Items to display = 8;
            obj.numViewsInSecondaryDisplay = 8;
            
            % Items 1-5
            % Starting from the bottom of the axes - display the features
            % for x, y, z, vec magnitude, and 1-d values               
            heightOffset = obj.updateSecondaryFeaturesDisplay();   

            itemsToDisplay = 3; % usage state, mean lumens, daylight approx
            remainingHeight = 1-heightOffset;
            height = remainingHeight/itemsToDisplay;
            if(obj.accelObj.getSampleRate()<=1)
                [usageVec,usageState, startStopDatenums] = obj.getUsageState();
                vecHandles = obj.VIEW.addFeaturesVecToSecondaryAxes(usageVec,obj.accelObj.dateTimeNum,height,heightOffset);
                %obj.VIEW.addOverlayToSecondaryAxes(usageState,startStopDatenums,1/numRegions,curRegion/numRegions);
            else
                vecHandles = [];
            end            
            % Next, add lumens intensity to secondary axes 
            heightOffset = heightOffset+height;
            maxLumens = 250;
            numFrames = obj.getFrameCount(); 
            [meanLumens,startStopDatenums] = obj.getMeanLumenPatches(numFrames);
            obj.VIEW.addOverlayToSecondaryAxes(meanLumens,startStopDatenums,height,heightOffset,maxLumens);
            %             [medianLumens,startStopDatenums] = obj.getMedianLumenPatches(1000);
            %             obj.VIEW.addLumensOverlayToSecondaryAxes(meanLumens,startStopDatenums);
            
            % Finally Add daylight to the top.
            heightOffset = heightOffset+height;            
            maxDaylight = 1;
            [daylight,startStopDatenums] = obj.getDaylight(numFrames);
            obj.VIEW.addOverlayToSecondaryAxes(daylight,startStopDatenums,height-0.005,heightOffset,maxDaylight);
            
            obj.initCallbacks(); %initialize callbacks now that we have some data we can interact with.

            obj.VIEW.showReady('all');

        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Initializes widgets for results view mode.  Widgets are
        %> disabled if the resultsPathname does not exist or cannot be
        %> found.
        %> @param this Instance of PAController
        %> @retval success A boolean value (true on successful initialization of the resultsPathname into padaco's view
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function success = initResultsView(this)
            success = false;
            if(isdir(this.resultsPathname))
                if(~isempty(this.StatTool))                   
                    this.StatTool.init();  %calls a plot refresh
                else
                    this.StatTool = PAStatTool(this.VIEW.figurehandle,this.resultsPathname,this.SETTINGS.StatTool);
                end

                success = this.StatTool.getCanPlot();                
            end
            disableFlag = ~success;
            this.VIEW.initWidgets('results',disableFlag);
            if(~success)
                this.StatTool = [];
                responseButton = questdlg('Results output pathname is either not set or was not found.  Would you like to choose one now?','Find results output path?');
                if(strcmpi(responseButton,'yes'))
                    this.menuFileOpenResultsPathCallback();
                end
                
            end
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Returns the display type instance variable.    
        %> @param obj Instance of PAView.
        %> @retval structName Name of the field that matches the description of the current display type used.
        %> - @c timeSeries
        %> - @c bins
        %> - @c features        
        %> @note See PAData.getStructTypes()
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function structName = getDisplayType(obj)
            structName = obj.VIEW.getDisplayType();
        end       
        
        % ======================================================================
        %> @brief Returns a structure of PAControllers saveable parameters as a struct.
        %> @param obj Instance of PAView.
        %> @retval pStruct A structure of save parameters which include the following
        %> fields
        %> - @c featureFcn
        %> - @c signalTagLine
        function pStruct = getSaveParameters(obj)
            pStruct.featureFcn = obj.getExtractorMethod();
            pStruct.signalTagLine = obj.getSignalSelection();
            pStruct.batch = obj.batch;
            pStruct.screenshotPathname = obj.screenshotPathname;
            pStruct.viewMode = obj.viewMode;
            pStruct.resultsPathname = obj.resultsPathname;
        end
        
        % ======================================================================
        %> @brief Returns a structure of PAView's primary axes currently displayable line handles.
        %> @param obj Instance of PAView.
        %> @retval lineHandles A structure of line handles of the current display type are
        %> showable in the primary axes (i.e. they are only not seen if the
        %user has set the line handle's 'visible' property to 'off'
        function lineHandles = getDisplayableLineHandles(obj)
           lineHandleStruct = obj.VIEW.getLinehandle(obj.getDisplayType());             
           lineHandles = PAData.struct2vec(lineHandleStruct);
        end
        
        % =================================================================
        %> @brief Channel contextmenu callback to hide the selected
        %> channel.
        %> @param hObject Handle of callback object (unused).
        %> @param eventdata Unused.
        % =================================================================
        function contextmenu_line_hide_callback(obj,hObject,eventdata)
            tagLine = get(gco,'tag');
            parentH = get(gco,'parent');
            obj.accelObj.setVisible(tagLine,'off');   
            
            % get the siblings handles with same tagLine (e.g. label and
            % rereference line handles.
            h = findobj(parentH,'tag',tagLine);
            set(h,'visible','off','hittest','off'); % turn the hittest off so I can access contextmenus when clicking over the unseen line.
            set(gco,'selected','off');
        end
        
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Creates a temporary overlay from paDataObject's values
        %> and takes a screenshot of it which is saved as img_filename.
        %> @param obj Instance of PAController
        %> @param paDataObject Instance of PAData
        %> @param featureFcn Extractor method for obtaining features from
        %> curData.        
        %> @param img_filename Filename (full) to save the screenshot too.
        %> @note The image format is determined from img_filename's
        %> extension.
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function overlayScreenshot(obj, paDataObject, featureFcn, img_filename)
            [~,~, ext] = fileparts(img_filename);
            ext = strrep(ext,'.','');  %remove leading '.' when it exists (i.e. not an empty string).
            if(strcmpi(ext,'jpg'))
                imgFmt = '-djpeg';
            else
                imgFmt = strcat('-d',lower(ext));
            end
            
            fig_h = obj.VIEW.figurehandle;
            axes_copy = copyobj(obj.VIEW.axeshandle.secondary,fig_h);
            
            f = figure('visible','off','paperpositionmode','auto','inverthardcopy','on',...
                'units',get(fig_h,'units'),'position',get(fig_h,'position'),...
                'toolbar','none','menubar','none');
            set(f,'units','normalized','renderer','zbuffer');
            set(axes_copy,'parent',f);

            obj.drawOverlay(paDataObject,featureFcn,axes_copy);
            obj.cropFigure2Axes(f,axes_copy);

            set(f,'visible','on');
            set(f,'clipping','off');
            print(f,imgFmt,'-r0',img_filename);
            delete(f);
        end
        
        %> Draw all parts of the overlay to axesH using paDataObject
        %> This is used for batch processing.
        function [featureHandles] = drawOverlay(obj,paDataObject,featureFcn,axesH)
            
            numFrames = paDataObject.getFrameCount();
            maxLumens = 250;
            
            % Modified - by adding paDataObject as secondary value.  
            [meanLumens,startStopDatenums] = obj.getMeanLumenPatches(numFrames,paDataObject);
            
            % Modified - by adding axesH as second argument
            obj.VIEW.addOverlayToAxes(meanLumens,startStopDatenums,1/7,5/7,maxLumens,axesH);
            
            maxDaylight = 1;
            % Modified get daylight somehow - perhaps to include accelObj as second argument.
            [daylight,startStopDatenums] = obj.getDaylight(numFrames,paDataObject);
            
            % Modified - by adding axesH as last argument
            obj.VIEW.addOverlayToAxes(daylight,startStopDatenums,1/7-0.005,6/7,maxDaylight,axesH);

            % updateSecondaryFeaturesDisplay 
            signalTagLines = strcat('accel.',paDataObject.accelType,'.',{'x','y','z','vecMag'})';
            numViews = (numel(signalTagLines)+1)+2;
            height = 1/numViews;
            heightOffset = 0;
            featureHandles = [];
            for s=1:numel(signalTagLines)
                signalName = signalTagLines{s};
                % Modified to pass in the paDataObj as last parameter
                [featureVec, startStopDatenums] = obj.getFeatureVec(featureFcn,signalName,numFrames,paDataObject);
                if(s<numel(signalTagLines))
                    vecHandles = obj.VIEW.addFeaturesVecToAxes(featureVec,startStopDatenums,height,heightOffset,axesH);
                    featureHandles = [featureHandles(:);vecHandles(:)];
                else
                    % This requires twice the height because it will have a
                    % feature line and heat map
                    obj.VIEW.addFeaturesVecAndOverlayToAxes(featureVec,startStopDatenums,height*2,heightOffset,axesH);
                    
                end
                heightOffset = heightOffset+height;
            end
            
            ytickLabel = {'X','Y','Z','|X,Y,Z|','|X,Y,Z|','Activity','Lumens','Daylight'};
            numViews = numel(ytickLabel);
            startStopDatenum = [startStopDatenums(1),startStopDatenums(end)];
            axesProps.yticklabel = ytickLabel;
            axesProps.ytick = 1/numViews/2:1/numViews:1;
            axesProps.TickDir = 'in';
            axesProps.TickDirMode = 'manual';
            axesProps.TickLength = [0.001 0];
            
            
            axesProps.xlim = startStopDatenum;
            [~,~,d,h,mi,s] = datevec(diff(startStopDatenum));
            durationDays = d+h/24+mi/60/24+s/3600/24;
            if(durationDays<0.25)
                dateScale = 1/48; %show every 30 minutes
            elseif(durationDays<0.5)
                dateScale = 1/24; %show every hour
            elseif(durationDays<0.75)
                dateScale = 1/12; %show every couple hours
            elseif(durationDays<=1)
                dateScale = 1/6; %show every four hours
            elseif(durationDays<=2)
                dateScale = 1/3; %show every 8 hours
            elseif(durationDays<=10)
                dateScale = 1/2; %show every 12 hours
            else
                dateScale = 1; %show every 24 hours.
                
            end    
            if(dateScale >= 1/3)
                timeDeltaSec = datenum(0,0,1)/24/3600;
                studyDatenums = startStopDatenum(1):timeDeltaSec:startStopDatenum(2);
                [~,~,~,hours,minutes,sec] = datevec(studyDatenums);
                newDayIndices = mod([hours(:),minutes(:),sec(:)]*[1;1/60;1/3600],24)==0;
%                 quarterDayIndices =  mod([hours(:),min(:),sec(:)]*[1;1/60;1/3600],24/4)==0;

                xTick = studyDatenums(newDayIndices);
                axesProps.XGrid = 'on';
                axesProps.XMinorGrid = 'off';
                axesProps.XMinorTick = 'on';
                                
            else
                timeDelta = datenum(0,0,1)*dateScale;
                xTick = [startStopDatenum(1):timeDelta:startStopDatenum(2), startStopDatenum(2)];
                axesProps.XMinorTick = 'off';
                axesProps.XGrid = 'off';
            end
            
            axesProps.gridlinestyle = 'REPLACE_WITH_DASH_DASH';
            axesProps.YGrid = 'off';
            axesProps.YMinorGrid = 'off';
            axesProps.ylim = [0 1];
            axesProps.xlim = startStopDatenum;
            
            axesProps.XTick = xTick;
            axesProps.XTickLabel = datestr(xTick,'ddd HH:MM');
            
           
            fontReduction = min([4, floor(durationDays/4)]);
            axesProps.fontSize = 14-fontReduction;
            
            set(axesH,axesProps);
            
        end
        
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        %> @brief Takes a screenshot of the padaco figure.
        %> @param obj Instance of PAController
        % REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
        function figureScreenshot(obj)
            
            
            filterspec = {'png','PNG';'jpeg','JPEG'};
            save_format = {'-dpng','-djpeg'};
            if(isa(obj.accelObj,'PAData'))
                img_filename = [obj.accelObj.filename,'_window ',num2str(obj.getCurWindow),'.png'];
            else
                img_filename = ['padaco_window ',num2str(obj.getCurWindow),'.png'];
            end
            [img_filename, img_pathname, filterindex] = uiputfile(filterspec,'Screenshot name',fullfile(obj.screenshotPathname,img_filename));
            if isequal(img_filename,0) || isequal(img_pathname,0)
                disp('User pressed cancel');
            else
                try
                    if(filterindex>2)
                        filterindex = 1; %default to .png
                    end
                    fig_h = obj.VIEW.figurehandle;
                    axes_copy = copyobj(obj.VIEW.axeshandle.secondary,fig_h);

                    f = figure('visible','off','paperpositionmode','auto','inverthardcopy','on',...
                        'units',get(fig_h,'units'),'position',get(fig_h,'position'),...
                        'toolbar','none','menubar','none');
                    set(f,'units','normalized');
                    set(axes_copy,'parent',f);
                    

                    cropFigure2Axes(f,axes_copy);

                    set(f,'visible','on');
                    set(f,'clipping','off');
                    
                    

                    print(f,save_format{filterindex},'-r0',fullfile(img_pathname,img_filename));
                    
                    %save the screenshot
                    %         print(f,['-d',filterspec{filterindex,1}],'-r75',fullfile(img_pathname,img_filename));
                    %         print(f,fullfile(img_pathname,img_filename),['-d',filterspec{filterindex,1}]);
                    %         print(f,['-d',filterspec{filterindex,1}],fullfile(img_pathname,img_filename));
                    %         set(handles.axes1,'position',apos,'dataaspectratiomode','manual' ,'dataaspectratio',dataaspectratio,'parent',handles.sev_main_fig)
                    delete(f);                    
                    obj.screenshotPathname = img_pathname;
                catch ME
                    showME(ME);
                    %         set(handles.axes1,'parent',handles.sev_main_fig);
                end
            end
        end
        
        
    end

    methods (Static)
        
        function cropFigure2Axes(fig_h,axes_h)
            %places axes_h in middle of figure with handle fig_h
            %useful for prepping screen captures
            
            % Hyatt Moore IV
            % 1/16/2013
            
            fig_units_in = get(fig_h,'units');
            axes_units_in = get(axes_h,'units');
            
            set(fig_h,'units','pixels');
            set(axes_h,'units','pixels');
            
            
            a_pos = get(axes_h,'position'); %x, y, width, height
            f_pos = get(fig_h,'position');
            
            a_width = a_pos(3);
            a_height = a_pos(4);
            
            set(axes_h,'position',[a_width*0.06,a_height*0.1,a_width,a_height]);
            set(fig_h,'position',[f_pos(1),f_pos(2),a_width*1.1,a_height*1.2]);
            
            
            %reset units to original
            set(fig_h,'units',fig_units_in);
            set(axes_h,'units',axes_units_in);
            
        end
        
        % ======================================================================
        %> @brief Returns a structure of PAControllers default, saveable parameters as a struct.
        %> @retval pStruct A structure of parameters which include the following
        %> fields
        %> - @c featureFcn
        %> - @c signalTagLine
        function pStruct = getDefaultParameters()
            [tagLines,~] = PAData.getDefaultTagLineLabels();
            featureStruct = PAData.getFeatureDescriptionStruct();
            featureFcns = fieldnames(featureStruct);
            pStruct.featureFcn = featureFcns{1};
            pStruct.signalTagLine = tagLines{1};

            pStruct.batch = PABatchTool.getDefaultParameters();
            
            mPath = fileparts(mfilename('fullpath'));
            pStruct.screenshotPathname = mPath;
            pStruct.viewMode = 'timeseries';
            pStruct.resultsPathname = pStruct.batch.outputDirectory;
        end        
    end
    
    
end


##### SOURCE END #####
--></body></html>